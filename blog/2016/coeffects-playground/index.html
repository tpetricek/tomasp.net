<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Droid+Sans+Mono&family=Kreon:wght@300;400;500;600&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="alternate" type="application/rss+xml" title="Latest news from Tomas Petricek" href="/rss.xml" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link href="/custom/style.css" rel="stylesheet">
  <link href="/custom/tooltips.css" rel="stylesheet">
  <script src="/custom/tooltips.js" type="text/javascript"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-big.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicon-big.png">
  <meta name="msapplication-TileColor" content="#004C6B">
  <meta name="msapplication-TileImage" content="/img/favicon-big.png">
  <meta name="theme-color" content="#004C6B">
  
  <title>Coeffects playground: Interactive essay based on my PhD thesis - Tomas Petricek</title>

  <meta name="description" content=" In my PhD thesis, I worked on integrating contextual information into a type system of functional programming languages. Most of the work is on theory, but I wanted to make it more accessible. To do this, I built an interactive essay where you can write, run, type check and parse simple context-aware programs and learn more about the (dry) theory in a more fun way." />
  <meta name="keywords" content="coeffects, research, functional programming, programming languages, " />  
  <meta name="author" content="Tomas Petricek" />
  <meta name="copyright" content="Tomas Petricek" />
  
  <meta property="og:title" content="Coeffects playground: Interactive essay based on my PhD thesis" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://tomasp.net/blog/2016/coeffects-playground/" />
  <meta property="og:image" content="http://tomasp.net/blog/2016/coeffects-playground/coeffects.png" />
  <meta property="og:description" content=" In my PhD thesis, I worked on integrating contextual information into a type system of functional programming languages. Most of the work is on theory, but I wanted to make it more accessible. To do this, I built an interactive essay where you can write, run, type check and parse simple context-aware programs and learn more about the (dry) theory in a more fun way." />
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@tomaspetricek">
  <meta name="twitter:creator" content="@tomaspetricek">  
  <meta name="twitter:title" content="Coeffects playground: Interactive essay based on my PhD thesis" />
  <meta name="twitter:image" content="http://tomasp.net/blog/2016/coeffects-playground/coeffects.png" />
  <meta name="twitter:description" content=" In my PhD thesis, I worked on integrating contextual information into a type system of functional programming languages. Most of the work is on theory, but I wanted to make it more accessible. To do this, I built an interactive essay where you can write, run, type check and parse simple context-aware programs and learn more about the (dry) theory in a more fun way." />
    
  <script type="application/ld+json">
  {
  	"@context": "http:\/\/schema.org",
  	"@type": "Article",
  	"name": "Coeffects playground: Interactive essay based on my PhD thesis",
    "headline": "Coeffects playground: Interactive essay based on my PhD thesis",
  	"description": " In my PhD thesis, I worked on integrating contextual information into a type system of functional programming languages. Most of the work is on theory, but I wanted to make it more accessible. To do this, I built an interactive essay where you can write, run, type check and parse simple context-aware programs and learn more about the (dry) theory in a more fun way.",
  	"url": "http://tomasp.net/blog/2016/coeffects-playground/",
  	"author": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	},
  	"creator": ["Tomas Petricek"],
  	"dateCreated": "2016-04-12T16:33:52.3133917+02:00",
  	"datePublished": "2016-04-12T16:33:52.3133917+02:00",
    "dateModified": "2016-04-12T16:33:52.3133917+02:00",
    "mainEntityOfPage": "http://tomasp.net/blog/2016/coeffects-playground/",
  	"image": "http://tomasp.net/blog/2016/coeffects-playground/coeffects.png",
  	"thumbnailUrl": "http://tomasp.net/blog/2016/coeffects-playground/coeffects.png",
  	"keywords": ["coeffects", "research", "functional programming", "programming languages",  "tomas", "petricek"],
  	"inLanguage": "en-us",
  	"publisher": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
      "logo": "http://tomasp.net/img/favicon-big.png",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	}
  }  
  </script>

</head>
<body class="default">
    
  <span class="tplink"><a href="/">TP</a></span>

  <article class='article''>
    <h1><span class="hm">Coeffects playground</span><span class="hs"> Interactive essay based on my PhD thesis</span></h1>
<p>In my <a href="http://tomasp.net/academic/theses/coeffects/">PhD thesis</a>, I worked on integrating
<em>contextual information</em> into a type system of functional programming languages. For example,
say your mobile application accesses something from the environment such as GPS sensor or your
Facebook friends. With <em>coeffects</em>, this could be a part of the type. Rather than having type
<code>string -&gt; Person</code>, the type of a function would also include resources and would be
<code>string -{ gps, fb }-&gt; Person</code>. I wrote <a href="http://tomasp.net/blog/2014/why-coeffects-matter/">longer introduction to coeffects</a> on this
blog before.</p>
<p>As one might expect, the PhD thesis is more theoretical and it looks at other kinds of contextual
information (e.g. past values in stream-based data-flow programming) and it identifies abstract
<em>coeffect algebra</em> that captures the essence of contextual information that can be nicely tracked
in a functional language.</p>
<p>I always thought that the most interesting thing about the thesis is that it gives people a nice way
to think about <em>context</em> in a unified way. Sadly, the very theoretical presentation in the thesis
makes this quite hard for those who are not doing programming language theory.</p>
<p>To make it a bit easier to explore the ideas behind coeffects, I wrote a coeffect playground
that runs in a web browser and lets you learn about coeffects, play with two example context-aware languages,
run a couple of demos and learn more about how the theory works. Go <a href="http://tomasp.net/coeffects/">check it out now</a>
or continue below to learn more about some interesting internals!</p>
<a href="http://tomasp.net/coeffects/">
<img src="http://tomasp.net/blog/2016/coeffects-playground/screenshot.png" style="width:90%; margin:0px 5% 10px 5%" />
</a>
<h2>Interactive essays</h2>
<p>The <a href="http://tomasp.net/coeffects/">coeffects playground</a> is something between an article about coeffects and an
implementation of a simple coeffect language - it guides you through an explanation (as an article would), it
lets you run examples, but it also lets you write your own little programs and run them or type check them and
explore the typing derivations.</p>
<p>Probably the best explanation of what my interactive coeffect playground tries to offer is from
Bret Victor's essay called <a href="http://worrydream.com/ExplorableExplanations">Explorable Explanations</a>:</p>
<blockquote>
<p>An active reader asks questions, considers alternatives, (...) tries to
generalize specific examples, and devise specific examples for generalities.
An active reader doesn't passively sponge up information, but uses the
author's argument as a springboard for critical thought and deep understanding.</p>
<p>Do our reading environments encourage active reading? Or do they utterly
oppose it? A typical reading tool, such as a book or website, displays the
author's argument, and nothing else. The reader's line of thought remains
internal and invisible, vague and speculative. We form questions, but can't
answer them. We consider alternatives, but can't explore them.</p>
<p style="text-align:right;font-style:italic;">Bret Victor, <a href="http://worrydream.com/ExplorableExplanations">Explorable Explanations</a></p>
</blockquote>
<p>Bret Victor also has a nice sample showing the ideas of Explorable Explanations on the <a href="http://worrydream.com/TenBrighterIdeas">climate
change</a> and a <a href="http://worrydream.com/#!/ScientificCommunicationAsSequentialArt">network science
paper</a>.
For network science or climate change, you can imagine interesting visualizations and how changes
of parameters done by the reader can affect them. For presenting coeffects, I had to figure out how
to use similar ideas in a fairly theoretical environment. Programming language theory papers usually
have just a couple of typing rules or translation rules written as dry mathematical equations.</p>
<p>Quite surprisingly, I actually learned about Bret Victor's nice demos only later when I started working
on my demo. What made me think about different ways of presenting academic research earlier was Robert Pirsig's
<a href="http://www.amazon.com/Zen-Art-Motorcycle-Maintenance-Inquiry/dp/0060589469">Zen and the Art of Motorcycle Maintenance</a>
and <a href="http://www.amazon.com/Medium-Massage-Marshall-McLuhan/dp/1584230703/ref=mt_paperback?_encoding=UTF8&amp;me=">The Medium is the Massage</a>
by Marshall McLuhan and Quentin Fiore. Finally, it was also the <a href="http://www.future-programming.org/">Future Programming Workshop</a>
organized by Jonathan Edwards. (Thanks!)</p>
<h2>Playing in the playground</h2>
<p>The playground has a JavaScript implementation (not <em>written</em> in JavaScript, of course!) of a simple
context-aware programming language. This includes a parser, type checker, translator (which turns your
source code into a simple <em>desugared</em> version) and an interpreter for the target language, so pretty
much all you'd need in a real implementation. But those components are used in a different way than how
you would use them in a real-world implementation. The playground lets you "look under the cover" in a
number of ways.</p>
<h3>Run your own small programs</h3>
<img src="ia-run.png" style="float:right;margin:5px 0px 10px 10px" />
<p>You can run a couple of samples or your own programs. This type-checks your code (shows you the type),
infers the required context and generates a simple UI where you can enter the contextual information
(required <em>implicit parameters</em> or <em>past values</em>). Then it translates your source code into the simpler
target language and runs the interpreter. This is the closest view to "normal" running of a program.</p>
<div style="clear:both"></div>
<h3>Interactive data-flow demo</h3>
<img src="ia-mouse.png" style="float:right;margin:5px 0px 10px 10px" />
<p>One of the context-aware languages is a simple data-flow language where you can write programs over
streams. In addition to a simple demo where you just enter N past values by hand in textbox, the essay
offers a more fun version - where last N values are taken from X and Y coordinates of your mouse moves!</p>
<div style="clear:both"></div>
<h3>Explorable typing derivations</h3>
<img src="ia-tc.png" style="float:right;margin:5px 0px 10px 10px" />
<p>The most interesting new thing in my thesis is a <em>coeffect type system</em> that tracks the contextual information
about programs in the types of functions. But when you run a type checker, you usually just see "Good" or "Bad"
as the result! In the essay, you can explore the typing derivation - the reasoning that the algorithm did to
prove that your program is well-typed. If you see a typing judgement, click on the assumptions to go up or
on the conclusions to go down!</p>
<div style="clear:both"></div>
<h3>Comonadic language translation</h3>
<img src="ia-transl.png" style="float:right;margin:5px 0px 10px 10px" />
<p>Programs you write may contain special <em>contextual</em> language constructs like <code>?fst</code> (implicit parameter) or
<code>prev</code> (past value in data-flow). The way programs run is that they are translated to a simpler target language
without those special constructs (a bit like how the <a href="https://en.wikibooks.org/wiki/Haskell/do_notation">do notation for monads works</a>).
The playground exposes this part too and you can see the translated version of your source programs.</p>
<div style="clear:both"></div>
<h3>More essay features</h3>
<img src="ia-more.png" style="float:right;margin:5px 0px 10px 10px" />
<p>In addition to the interactive parts, I also experimented with a few additional presentation options in the
essay. When you come, some parts of essay are hidden and you have to explicitly reveal them - the idea is
that when you just skim read the essay, you should see the most important parts. There are also a couple of
mini-slide decks that compare coeffects with effects.</p>
<div style="clear:both"></div>
<p>I have to say, writing an interactive essay is probably more work than writing an academic paper about
the work, but I think it makes a dry topic like programming language theory much easier to understand.
After exploring the playground, you should see a pop-up with a <a href="https://docs.google.com/forms/d/17iptGK2LBtAkYLIi-g7bGesdFa9-ZVhFoFpzJhn1Bk8/viewform">brief
survey</a>, so
please use it to give me feedback about the project! I'm curious to see what people think about this
way of presenting programming language research!</p>
<h2>Behind the scenes</h2>
<p>All the code in the essay runs as JavaScript on the client-side, but I'm not crazy enough to write
a parser and type checker for a language in JavaScript, so I used F# and <a href="http://funscript.info/">FunScript</a>
to compile F# into JavaScript. All source code <a href="https://github.com/coeffects/coeffects-playground">is available on GitHub</a>,
so feel free to have a look there!</p>
<p>Thanks to F# and FunScript, the whole implementation including parser, type checker, translator,
interpreter and even most of the user interface are only some 2800 lines of code. It compiles to
46000 lines of ugly JavaScript - partly because of advanced F# features like generic and pattern
matching and partly because FunScript does not try to optimize much. (I'm quite curious to see
how <a href="https://github.com/fsprojects/Fable">Fable</a> or <a href="http://websharper.com/">WebSharper</a> would compare!)</p>
<p>There is a number of really nice things that make the implementation so short and simple.</p>
<h3>Algebraic data types</h3>
<p>Any general purpose programming language should have a way of defining <em>algebraic data types</em>. In
F# those are called <em>discriminated unions</em> and they let us define what expressions and types look
like in the context-aware programming language that you can use in the playground:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="t">Expr</span> <span class="o">=</span>
  <span class="c">// Variable, constants, functions &amp; application</span>
  | <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="p">Var</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">string</span>
  | <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="p">Number</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="t">float</span>
  | <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="p">Fun</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="t">Var</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="t">Typed</span>
  | <span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="p">App</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="t">Typed</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="t">Typed</span>
  <span class="c">// Special contextual language features</span>
  | <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="p">Prev</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 13)" onmouseover="showTip(event, 'fs8', 13)" class="t">Typed</span>
  | <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="p">QVar</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs3', 15)" onmouseover="showTip(event, 'fs3', 15)" class="t">string</span>
  | <span id="fst12" onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16, document.getElementById('fst12'))" class="omitted">(other cases omitted)</span>

<span class="k">and</span> <span onmouseout="hideTip(event, 'fs13', 17)" onmouseover="showTip(event, 'fs13', 17)" class="t">Type</span> <span class="o">=</span>
  | <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="p">Primitive</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs3', 19)" onmouseover="showTip(event, 'fs3', 19)" class="t">string</span>
  | <span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="p">Func</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs16', 21)" onmouseover="showTip(event, 'fs16', 21)" class="t">Coeffect</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="t">Type</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs13', 23)" onmouseover="showTip(event, 'fs13', 23)" class="t">Type</span>
  | <span id="fst12" onmouseout="hideTip(event, 'fs12', 24)" onmouseover="showTip(event, 'fs12', 24, document.getElementById('fst12'))" class="omitted">(other cases omitted)</span>

<span class="k">and</span> <span onmouseout="hideTip(event, 'fs8', 25)" onmouseover="showTip(event, 'fs8', 25)" class="t">Typed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 26)" onmouseover="showTip(event, 'fs13', 26)" class="t">Type</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs1', 27)" onmouseover="showTip(event, 'fs1', 27)" class="t">Expr</span>
</code></pre></td>
</tr>
</table>
<p>I simplified the definition a bit, but it shows the idea. The <code>Expr</code> type captures different kinds
of expressions. For example <code>(fun x -&gt; x) 10</code> is parsed as an application <code>App</code> with <code>Fun</code> on the
left-hand side and <code>Number</code> on the right-hand side. There are two additional constructs for the
context-aware language features. <code>QVar</code> models special <code>?foo</code> variables and <code>Prev</code> lets you access
previous value in data-flow computations such as <code>(x + prev x) / 2</code>.</p>
<p>The <code>Type</code> is interesting too. There is <code>Primitive</code> for primitive types like <code>num</code> and a <code>Func</code> type
representing a function. You can immediately see that a function is not just <code>T1 -&gt; T2</code> with two types,
but that it also carries a <code>Coeffect</code> annotation with information about context that needs to be
available when you run the function.</p>
<h3>Parser combinators</h3>
<p>To parse the source code into <code>Expr</code> values, I wrote a minimal parser combinator library (sadly,
I cannot use <a href="http://www.quanttec.com/fparsec/">FParsec</a>, because it needs to compile to JavaScript).
The parsing is still done in two steps - we first turn a sequence of characters into a sequence of
tokens and then turn tokens into <code>Expr</code> value. This makes the parsing code easy to read and write.
For example, <code>fun x -&gt; ...</code> and <code>prev ...</code> are parsed like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="i">func</span> <span class="o">=</span>
  ( <span class="i">token</span> <span class="i">Token</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 29)" onmouseover="showTip(event, 'fs6', 29)" class="i">Fun</span> <span class="o">&lt;*&gt;</span>
    <span class="i">ident</span> <span class="o">&lt;*&gt;</span>
    <span class="i">token</span> <span class="i">Token</span><span class="o">.</span><span class="i">Arrow</span> <span class="o">&lt;*&gt;</span>
    <span class="i">expr</span>  )
  <span class="o">|&gt;</span> <span class="i">map</span> (<span class="k">fun</span> (((_, <span class="i">var</span>), _), <span class="i">body</span>) <span class="k">-&gt;</span>  
      <span onmouseout="hideTip(event, 'fs1', 30)" onmouseover="showTip(event, 'fs1', 30)" class="i">Expr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 31)" onmouseover="showTip(event, 'fs6', 31)" class="i">Fun</span>(<span class="i">var</span>, <span class="i">body</span>))

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="i">prev</span> <span class="o">=</span>
  ( <span class="i">token</span> <span class="i">Token</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 33)" onmouseover="showTip(event, 'fs10', 33)" class="i">Prev</span> <span class="o">&lt;*&gt;</span>
    <span class="i">term</span> () )
  <span class="o">|&gt;</span> <span class="i">map</span> (<span class="k">fun</span> (_, <span class="i">body</span>) <span class="k">-&gt;</span>
      <span onmouseout="hideTip(event, 'fs1', 34)" onmouseover="showTip(event, 'fs1', 34)" class="i">Expr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 35)" onmouseover="showTip(event, 'fs10', 35)" class="i">Prev</span>(<span class="i">body</span>))
</code></pre></td>
</tr>
</table>
<p>The <code>&lt;*&gt;</code> operator represents sequential composition. For <code>func</code>, we need to parse the <code>fun</code> keyword
followed by an identifier, <code>-&gt;</code> token and an expression. The expression to access previous value of
a data stream, we just write <code>prev</code> followed by a term. (There is a distinction between expressions
and terms to deal with function application and operators. The parser also deals with operator
precedence and things like that.)</p>
<h3>Type checking and constraint solving</h3>
<p>The next part of the code is <a href="https://github.com/coeffects/coeffects-playground/blob/master/typechecker.fs#L149">the type checker</a>.
This walks over the parsed <code>Expr</code> value, annotates
everything with types and generates <em>constraints</em>. Initially, a lot of the types are variables
(think <code>'a'</code> in F# generics) and constraints specify equalities. For example, if you write
<code>(fun x -&gt; x) 5</code>, the type of the function is <code>'a -&gt; b'</code> and there will be constraints <code>'a = 'b</code>
(generated from the body) and <code>'a = num</code> (generated from the application).
Similar constraints are also collected about the coeffect annotations.</p>
<p>With F#, the constraint resolution becomes just a recursive loop with pattern matching:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="i">constraints</span> <span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="i">assigns</span> <span onmouseout="hideTip(event, 'fs22', 39)" onmouseover="showTip(event, 'fs22', 39)" class="i">cequals</span> <span class="o">=</span>
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs20', 40)" onmouseover="showTip(event, 'fs20', 40)" class="i">constraints</span> <span class="k">with</span>
  | [] <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs21', 41)" onmouseover="showTip(event, 'fs21', 41)" class="i">assigns</span>, <span onmouseout="hideTip(event, 'fs22', 42)" onmouseover="showTip(event, 'fs22', 42)" class="i">cequals</span>
  | (<span onmouseout="hideTip(event, 'fs23', 43)" onmouseover="showTip(event, 'fs23', 43)" class="i">l</span>, <span onmouseout="hideTip(event, 'fs24', 44)" onmouseover="showTip(event, 'fs24', 44)" class="i">r</span>)<span class="o">::</span><span onmouseout="hideTip(event, 'fs25', 45)" onmouseover="showTip(event, 'fs25', 45)" class="i">rest</span> <span class="k">when</span> <span onmouseout="hideTip(event, 'fs23', 46)" onmouseover="showTip(event, 'fs23', 46)" class="i">l</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 47)" onmouseover="showTip(event, 'fs24', 47)" class="i">r</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 48)" onmouseover="showTip(event, 'fs19', 48)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs25', 49)" onmouseover="showTip(event, 'fs25', 49)" class="i">rest</span> <span onmouseout="hideTip(event, 'fs21', 50)" onmouseover="showTip(event, 'fs21', 50)" class="i">assigns</span> <span onmouseout="hideTip(event, 'fs22', 51)" onmouseover="showTip(event, 'fs22', 51)" class="i">cequals</span>
  | (<span onmouseout="hideTip(event, 'fs13', 52)" onmouseover="showTip(event, 'fs13', 52)" class="t">Type</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 53)" onmouseover="showTip(event, 'fs15', 53)" class="p">Func</span>(<span onmouseout="hideTip(event, 'fs26', 54)" onmouseover="showTip(event, 'fs26', 54)" class="i">c1</span>, <span onmouseout="hideTip(event, 'fs27', 55)" onmouseover="showTip(event, 'fs27', 55)" class="i">l1</span>, <span onmouseout="hideTip(event, 'fs28', 56)" onmouseover="showTip(event, 'fs28', 56)" class="i">r1</span>), <span onmouseout="hideTip(event, 'fs13', 57)" onmouseover="showTip(event, 'fs13', 57)" class="t">Type</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 58)" onmouseover="showTip(event, 'fs15', 58)" class="p">Func</span>(<span onmouseout="hideTip(event, 'fs29', 59)" onmouseover="showTip(event, 'fs29', 59)" class="i">c2</span>, <span onmouseout="hideTip(event, 'fs30', 60)" onmouseover="showTip(event, 'fs30', 60)" class="i">l2</span>, <span onmouseout="hideTip(event, 'fs31', 61)" onmouseover="showTip(event, 'fs31', 61)" class="i">r2</span>))<span class="o">::</span><span onmouseout="hideTip(event, 'fs25', 62)" onmouseover="showTip(event, 'fs25', 62)" class="i">rest</span> <span class="k">-&gt;</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 63)" onmouseover="showTip(event, 'fs32', 63)" class="i">constrints</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs27', 64)" onmouseover="showTip(event, 'fs27', 64)" class="i">l1</span>, <span onmouseout="hideTip(event, 'fs30', 65)" onmouseover="showTip(event, 'fs30', 65)" class="i">l2</span>)<span class="o">::</span>(<span onmouseout="hideTip(event, 'fs28', 66)" onmouseover="showTip(event, 'fs28', 66)" class="i">r1</span>, <span onmouseout="hideTip(event, 'fs31', 67)" onmouseover="showTip(event, 'fs31', 67)" class="i">r2</span>)<span class="o">::</span><span onmouseout="hideTip(event, 'fs25', 68)" onmouseover="showTip(event, 'fs25', 68)" class="i">rest</span>
      <span onmouseout="hideTip(event, 'fs19', 69)" onmouseover="showTip(event, 'fs19', 69)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs20', 70)" onmouseover="showTip(event, 'fs20', 70)" class="i">constraints</span> <span onmouseout="hideTip(event, 'fs21', 71)" onmouseover="showTip(event, 'fs21', 71)" class="i">assigns</span> ((<span onmouseout="hideTip(event, 'fs26', 72)" onmouseover="showTip(event, 'fs26', 72)" class="i">c1</span>, <span onmouseout="hideTip(event, 'fs29', 73)" onmouseover="showTip(event, 'fs29', 73)" class="i">c2</span>)<span class="o">::</span><span onmouseout="hideTip(event, 'fs22', 74)" onmouseover="showTip(event, 'fs22', 74)" class="i">cequals</span>)
  | <span id="fst12" onmouseout="hideTip(event, 'fs12', 75)" onmouseover="showTip(event, 'fs12', 75, document.getElementById('fst12'))" class="omitted">(other cases omitted)</span>
</code></pre></td>
</tr>
</table>
<p>If there are no constraints left (first case), we are done and we return the results. If
there is a constraint <code>t = t</code> (with both things equal), we can drop it. The last case is
the most typical one - if we have two functions, <code>l1 -&gt; l2</code> and <code>r1 -&gt; r2</code>, we turn the
constraint <code>(l1 -&gt; l2) = (r1 -&gt; r2)</code> into a pair of constraints <code>l1 = r1</code> and <code>l2 = r2</code>
and we also collect a new equality requirement for coeffect annotations. One of
the omitted case (for variables) then collects the final <code>assigns</code> which maps variable
names to types. (In the final version, I sadly had to turn this into a more explicit
loop, because JavaScript does not do tail-calls...).</p>
<h3>Translation to target language</h3>
<p>When you run a coeffect program, it is parsed, type checked and then it is translated to
a target language. This replaces the special constructs like <code>Expr.Prev</code> and <code>Expr.QVar</code>
into expressions that pass the context around explicitly in ordinary variable. For details,
see the essay. The translation is, again, just a recursive function with pattern matching.
Two cases look like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs33', 76)" onmouseover="showTip(event, 'fs33', 76)" class="f">translate</span> <span onmouseout="hideTip(event, 'fs34', 77)" onmouseover="showTip(event, 'fs34', 77)" class="i">ctx</span> <span onmouseout="hideTip(event, 'fs35', 78)" onmouseover="showTip(event, 'fs35', 78)" class="i">e</span> <span class="o">=</span>
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs35', 79)" onmouseover="showTip(event, 'fs35', 79)" class="i">e</span> <span class="k">with</span>
  | <span onmouseout="hideTip(event, 'fs1', 80)" onmouseover="showTip(event, 'fs1', 80)" class="t">Expr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 81)" onmouseover="showTip(event, 'fs4', 81)" class="p">Number</span>(<span onmouseout="hideTip(event, 'fs36', 82)" onmouseover="showTip(event, 'fs36', 82)" class="i">n</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 83)" onmouseover="showTip(event, 'fs1', 83)" class="t">Expr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 84)" onmouseover="showTip(event, 'fs4', 84)" class="p">Number</span>(<span onmouseout="hideTip(event, 'fs36', 85)" onmouseover="showTip(event, 'fs36', 85)" class="i">n</span>)
  | <span onmouseout="hideTip(event, 'fs1', 86)" onmouseover="showTip(event, 'fs1', 86)" class="t">Expr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs37', 87)" onmouseover="showTip(event, 'fs37', 87)" class="p">Var</span>(<span onmouseout="hideTip(event, 'fs38', 88)" onmouseover="showTip(event, 'fs38', 88)" class="i">v</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 89)" onmouseover="showTip(event, 'fs1', 89)" class="i">Expr</span><span class="o">.</span><span class="i">Builtin</span>(<span class="s">&quot;counit&quot;</span>) <span class="o">|@|</span> <span onmouseout="hideTip(event, 'fs34', 90)" onmouseover="showTip(event, 'fs34', 90)" class="i">ctx</span>
  | <span id="fst39" onmouseout="hideTip(event, 'fs39', 91)" onmouseover="showTip(event, 'fs39', 91, document.getElementById('fst39'))" class="omitted">(more cases omitted)</span>
</code></pre></td>
</tr>
</table>
<p>The function takes <code>ctx</code> which is an expression that represents a newly generated variable
that keeps the context. If the expression <code>e</code> is a number, we just turn it into a number.
When translating a variable access <code>Var(v)</code>, we produce an expression that calls a special
<em>counit</em> operation on the context carried by the variable represented by <code>ctx</code>. (The
<code>|@|</code> operator is just a custom operator that creates <code>Expr.App</code> value).</p>
<h3>And even the user interface</h3>
<p>Although I mainly used F# for the language implementation part, I also used FunScript
jQuery bindings to write some of the user interface. For example when you are looking
at a typing derivation, you can click on parts of the typing judgement to navigate through the
derivation. This is handled by code that looks roughly like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Remembers the current path</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 92)" onmouseover="showTip(event, 'fs40', 92)" class="v">locations</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 93)" onmouseover="showTip(event, 'fs41', 93)" class="f">ref</span> []

<span class="c">/// Generate path for the specified &#39;jo&#39; element</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 94)" onmouseover="showTip(event, 'fs42', 94)" class="f">getNewPath</span> (<span onmouseout="hideTip(event, 'fs43', 95)" onmouseover="showTip(event, 'fs43', 95)" class="i">jo</span><span class="o">:</span><span class="i">JQuery</span>) <span class="o">=</span>
  <span id="fst44" onmouseout="hideTip(event, 'fs44', 96)" onmouseover="showTip(event, 'fs44', 96, document.getElementById('fst44'))" class="omitted">(Implementation omitted)</span>

<span class="i">jq</span>(<span class="s">&quot;#typing .mtable&quot;</span>)
  <span class="o">.</span><span class="i">on</span>(<span class="s">&quot;click&quot;</span>, <span class="k">fun</span> <span class="i">e</span> <span class="i">o</span> <span class="k">-&gt;</span>
    <span class="i">jq</span>(<span class="s">&quot;#typing .p-span&quot;</span>)
      <span class="o">.</span><span class="i">css</span>(<span class="s">&quot;backgroundColor&quot;</span>, <span class="s">&quot;transparent&quot;</span>)
    <span onmouseout="hideTip(event, 'fs40', 97)" onmouseover="showTip(event, 'fs40', 97)" class="i">locations</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs45', 98)" onmouseover="showTip(event, 'fs45', 98)" class="i">Value</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs46', 99)" onmouseover="showTip(event, 'fs46', 99)" class="i">snd</span> (<span onmouseout="hideTip(event, 'fs42', 100)" onmouseover="showTip(event, 'fs42', 100)" class="i">getNewPath</span> (<span class="i">jthis</span>()))
    <span class="i">typeset</span> ()
</code></pre></td>
</tr>
</table>
<p>The <code>locations</code> variable keeps the current path that the viewer followed (if you click on
the first assumption of the first judgement and then on the second assumption of the second
judgement, this will be a list <code>[0; 1]</code>). The <code>jq</code> function is an F# wrapper for writing
<code>$("...")</code> in JavaScript and <code>jthis</code> is a special wrapper for writing <code>$(this)</code> which is
not directly available in F#.</p>
<h2>Summary</h2>
<p>In the case of coeffect playgrounds, I did the interactive essay after writing the thesis, but I
think this way of presenting research is not just about giving additional and "easier to understand"
presentation. It actually changes which part of the research problem become important.</p>
<p>When writing papers, you have to extract minimal calculus that can be neatly presented in a
paper. When writing interactive essays, you instead have to extract some core aspects of the
functionality that you're creating to convince people that this is interesting. This means that you
also start thinking differently about the problem. I actually wrote about this briefly in
<a href="http://tomasp.net/blog/2014/philosophy-pl/">earlier post about programming languages and philosophy of science</a>.</p>
<p>Most of the features in the interactive essay are really experiments based on what I thought
could be useful when learning about <em>coeffects</em>. I would really like to hear from you - do you
think this is useful? Should every PhD thesis come with an interactive essay? There is a <a href="https://docs.google.com/forms/d/17iptGK2LBtAkYLIi-g7bGesdFa9-ZVhFoFpzJhn1Bk8/viewform">brief
survey you can fill on the page</a>
or contact me directly at <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> or
<a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a>.</p>


<div class="tip" id="fs1">type Expr =<br />&#160;&#160;| Var of string<br />&#160;&#160;| Number of float<br />&#160;&#160;| Fun of Var * Typed<br />&#160;&#160;| App of Typed * Typed<br />&#160;&#160;| Prev of Typed<br />&#160;&#160;| QVar of string<br />&#160;&#160;| ( **** )<br /><br />Full name: coeffectsplayground.Expr</div>
<div class="tip" id="fs2">Multiple items<br />union case Expr.Var: string -&gt; Expr<br /><br />--------------------<br />type Var = | Var<br /><br />Full name: coeffectsplayground.Var</div>
<div class="tip" id="fs3">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs4">union case Expr.Number: float -&gt; Expr</div>
<div class="tip" id="fs5">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = System.Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs6">union case Expr.Fun: Var * Typed -&gt; Expr</div>
<div class="tip" id="fs7">Multiple items<br />union case Var.Var: Var<br /><br />--------------------<br />type Var = | Var<br /><br />Full name: coeffectsplayground.Var</div>
<div class="tip" id="fs8">type Typed = Type * Expr<br /><br />Full name: coeffectsplayground.Typed</div>
<div class="tip" id="fs9">union case Expr.App: Typed * Typed -&gt; Expr</div>
<div class="tip" id="fs10">union case Expr.Prev: Typed -&gt; Expr</div>
<div class="tip" id="fs11">union case Expr.QVar: string -&gt; Expr</div>
<div class="tip" id="fs12">(other cases omitted)</div>
<div class="tip" id="fs13">type Type =<br />&#160;&#160;| Primitive of string<br />&#160;&#160;| Func of Coeffect * Type * Type<br />&#160;&#160;| ( **** )<br /><br />Full name: coeffectsplayground.Type</div>
<div class="tip" id="fs14">union case Type.Primitive: string -&gt; Type</div>
<div class="tip" id="fs15">union case Type.Func: Coeffect * Type * Type -&gt; Type</div>
<div class="tip" id="fs16">Multiple items<br />union case Coeffect.Coeffect: Coeffect<br /><br />--------------------<br />type Coeffect = | Coeffect<br /><br />Full name: coeffectsplayground.Coeffect</div>
<div class="tip" id="fs17">val func : obj<br /><br />Full name: coeffectsplayground.func</div>
<div class="tip" id="fs18">val prev : obj<br /><br />Full name: coeffectsplayground.prev</div>
<div class="tip" id="fs19">val solve : constraints:(Type * Type) list -&gt; assigns:&#39;a -&gt; cequals:(Coeffect * Coeffect) list -&gt; &#39;a * (Coeffect * Coeffect) list<br /><br />Full name: coeffectsplayground.solve</div>
<div class="tip" id="fs20">val constraints : (Type * Type) list</div>
<div class="tip" id="fs21">val assigns : &#39;a</div>
<div class="tip" id="fs22">val cequals : (Coeffect * Coeffect) list</div>
<div class="tip" id="fs23">val l : Type</div>
<div class="tip" id="fs24">val r : Type</div>
<div class="tip" id="fs25">val rest : (Type * Type) list</div>
<div class="tip" id="fs26">val c1 : Coeffect</div>
<div class="tip" id="fs27">val l1 : Type</div>
<div class="tip" id="fs28">val r1 : Type</div>
<div class="tip" id="fs29">val c2 : Coeffect</div>
<div class="tip" id="fs30">val l2 : Type</div>
<div class="tip" id="fs31">val r2 : Type</div>
<div class="tip" id="fs32">val constrints : (Type * Type) list</div>
<div class="tip" id="fs33">val translate : ctx:obj -&gt; e:Expr -&gt; Expr<br /><br />Full name: coeffectsplayground.translate</div>
<div class="tip" id="fs34">val ctx : obj</div>
<div class="tip" id="fs35">val e : Expr</div>
<div class="tip" id="fs36">val n : float</div>
<div class="tip" id="fs37">union case Expr.Var: string -&gt; Expr</div>
<div class="tip" id="fs38">val v : string</div>
<div class="tip" id="fs39">(more cases omitted)</div>
<div class="tip" id="fs40">val locations : obj list ref<br /><br />Full name: coeffectsplayground.locations<br /><em><br /><br />&#160;Remembers the current path</em></div>
<div class="tip" id="fs41">Multiple items<br />val ref : value:&#39;T -&gt; &#39;T ref<br /><br />Full name: Microsoft.FSharp.Core.Operators.ref<br /><br />--------------------<br />type &#39;T ref = Ref&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.ref&lt;_&gt;</div>
<div class="tip" id="fs42">val getNewPath : jo:&#39;a -&gt; &#39;b<br /><br />Full name: coeffectsplayground.getNewPath<br /><em><br /><br />&#160;Generate path for the specified &#39;jo&#39; element</em></div>
<div class="tip" id="fs43">val jo : &#39;a</div>
<div class="tip" id="fs44">(Implementation omitted)</div>
<div class="tip" id="fs45">property Ref.Value: obj list</div>
<div class="tip" id="fs46">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>


    <div class="info">
    <p class="share">
        <a target="_blank" href="https://twitter.com/intent/tweet?url=http%3a%2f%2ftomasp.net%2fblog%2f2016%2fcoeffects-playground%2f&amp;text=Coeffects+playground%3a+Interactive+essay+based+on+my+PhD+thesisvia+%40tomaspetricek">
          <i class="fab fa-twitter-square"></i></a>
        <a target="_blank" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2ftomasp.net%2fblog%2f2016%2fcoeffects-playground%2f">
          <i class="fab fa-facebook-square"></i></a>
        <a href="http://www.reddit.com/submit?url=http%3a%2f%2ftomasp.net%2fblog%2f2016%2fcoeffects-playground%2f&title=Coeffects+playground%3a+Interactive+essay+based+on+my+PhD+thesis">
          <i class="fab fa-reddit-square"></i></a>
        <a href="mailto:?subject=Coeffects%20playground%3a%20Interactive%20essay%20based%20on%20my%20PhD%20thesis&body=%20In%20my%20PhD%20thesis%2c%20I%20worked%20on%20integrating%20contextual%20information%20into%20a%20type%20system%20of%20functional%20programming%20languages.%20Most%20of%20the%20work%20is%20on%20theory%2c%20but%20I%20wanted%20to%20make%20it%20more%20accessible.%20To%20do%20this%2c%20I%20built%20an%20interactive%20essay%20where%20you%20can%20write%2c%20run%2c%20type%20check%20and%20parse%20simple%20context-aware%20programs%20and%20learn%20more%20about%20the%20(dry)%20theory%20in%20a%20more%20fun%20way.%0a%0aSee%3a%20http%3a%2f%2ftomasp.net%2fblog%2f2016%2fcoeffects-playground%2f">
          <i class="fa fa-envelope"></i></a>
    </p>
    <p class="details">
      <strong>Published:</strong> Tuesday, 12 April 2016, 4:33 PM<br />
      <strong>Author:</strong> Tomas Petricek<br />
      <strong>Typos:</strong> <a href="http://github.com/tpetricek/tomasp.net">Send me a pull request</a>!<br />
      
        <strong>Tags:</strong> <a
          href="/blog/tag/coeffects/">coeffects</a>, <a
          href="/blog/tag/research/">research</a>, <a
          href="/blog/tag/functional-programming/">functional programming</a>, <a
          href="/blog/tag/programming-languages/">programming languages</a></span><br />
      
    </p>
    </div>
  </article>


  <footer>
  <div class="footer-body">
    <div class="fl70"><div class="fmr">
      <h4><a href="http://tomasp.net/rss.xml"><i class="fa fa-rss" style="margin-right:5px;"></i></a> Blog archives</h4>
      <p>
      
      <a href="/blog/archive/february_2025/">February 2025 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2023/">December 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2023/">February 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2022/">September 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2022/">April 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2021/">October 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2021/">April 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2020/">October 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2020/">July 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2020/">April 2020 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2019/">December 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2019/">February 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2018/">November 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2018/">October 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2018/">May 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2017/">September 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2017/">June 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2017/">April 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2017/">March 2017 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2017/">January 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2016/">October 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2016/">September 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/august_2016/">August 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2016/">July 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2016/">May 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2016/">April 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2015/">December 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2015/">November 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2015/">September 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2015/">July 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2015/">June 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2015/">May 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2015/">April 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2015/">March 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2015/">February 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2015/">January 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2014/">December 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2014/">May 2014 (3)</a>,&nbsp;
      
      <a href="/blog/archive/april_2014/">April 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2014/">March 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2014/">January 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2013/">December 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2013/">November 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2013/">October 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2013/">September 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2013/">August 2013 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2013/">May 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2013/">April 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2013/">March 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2013/">February 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2013/">January 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2012/">December 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/october_2012/">October 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2012/">August 2012 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2012/">June 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2012/">April 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2012/">March 2012 (4)</a>,&nbsp;
      
      <a href="/blog/archive/february_2012/">February 2012 (5)</a>,&nbsp;
      
      <a href="/blog/archive/january_2012/">January 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2011/">November 2011 (5)</a>,&nbsp;
      
      <a href="/blog/archive/august_2011/">August 2011 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2011/">July 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/june_2011/">June 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2011/">May 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2011/">March 2011 (4)</a>,&nbsp;
      
      <a href="/blog/archive/december_2010/">December 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2010/">November 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2010/">October 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/september_2010/">September 2010 (4)</a>,&nbsp;
      
      <a href="/blog/archive/july_2010/">July 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2010/">June 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2010/">May 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2010/">February 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2010/">January 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/december_2009/">December 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2009/">July 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2009/">June 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2009/">May 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2009/">April 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2009/">March 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2009/">February 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2008/">December 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2008/">November 2008 (5)</a>,&nbsp;
      
      <a href="/blog/archive/october_2008/">October 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2008/">September 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2008/">June 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2008/">March 2008 (3)</a>,&nbsp;
      
      <a href="/blog/archive/february_2008/">February 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2007/">December 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2007/">November 2007 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2007/">October 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2007/">September 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2007/">August 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2007/">July 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2007/">April 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2007/">March 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2007/">February 2007 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2007/">January 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2006/">November 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2006/">October 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/august_2006/">August 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/july_2006/">July 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2006/">June 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2006/">May 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2006/">April 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2005/">December 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2005/">July 2005 (4)</a>,&nbsp;
      
      <a href="/blog/archive/june_2005/">June 2005 (5)</a>,&nbsp;
      
      <a href="/blog/archive/may_2005/">May 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2005/">April 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2005/">March 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2005/">January 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2004/">December 2004 (3)</a>,&nbsp;
      
      <a href="/blog/archive/november_2004/">November 2004 (2)</a>,&nbsp;
      
      </p>
    </div></div>
    <div class="fr30"><div class="fmr">
      <h4>License and about</h4>
      <p>All articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under the MIT License.
      </p>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>
        and <a href="http://dotliquidmarkup.org/">DotLiquid</a>.
        For more info, see the <a href="https://github.com/tpetricek/tomasp.net">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li><i class="fab fa-twitter"></i> Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li><i class="fab fa-github"></i> GitHub: <a href="https://github.com/tpetricek">@tpetricek</a></li>
        <li><i class="fa fa-envelope"></i> Email: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
      </ul>
      <p style="text-align:center;margin-top:15px;"><img src="https://tomasp.net/img/cc-sa.png" alt="CC License logo" /></p>
    </div></div>
  </div>
  </footer>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
