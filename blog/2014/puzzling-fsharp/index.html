<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Droid+Sans+Mono&family=Kreon:wght@300;400;500;600&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="alternate" type="application/rss+xml" title="Latest news from Tomas Petricek" href="/rss.xml" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link href="/custom/style.css" rel="stylesheet">
  <link href="/custom/tooltips.css" rel="stylesheet">
  <script src="/custom/tooltips.js" type="text/javascript"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-big.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicon-big.png">
  <meta name="msapplication-TileColor" content="#004C6B">
  <meta name="msapplication-TileImage" content="/img/favicon-big.png">
  <meta name="theme-color" content="#004C6B">
  
  <title>Solving fun puzzles with F# - Tomas Petricek</title>

  <meta name="description" content=" Do you need to convince your friends and family that programming can be fun? Here is a story of how I managed to do that with F# at New Year's eve! I got a puzzle as a gift for Christmas and after a few days of failed attempts, I managed to solve it with F# in about 1 hour..." />
  <meta name="keywords" content="f#, fun, functional programming, " />  
  <meta name="author" content="Tomas Petricek" />
  <meta name="copyright" content="Tomas Petricek" />
  
  <meta property="og:title" content="Solving fun puzzles with F#" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://tomasp.net/blog/2014/puzzling-fsharp/" />
  <meta property="og:image" content="http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg" />
  <meta property="og:description" content=" Do you need to convince your friends and family that programming can be fun? Here is a story of how I managed to do that with F# at New Year's eve! I got a puzzle as a gift for Christmas and after a few days of failed attempts, I managed to solve it with F# in about 1 hour..." />
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@tomaspetricek">
  <meta name="twitter:creator" content="@tomaspetricek">  
  <meta name="twitter:title" content="Solving fun puzzles with F#" />
  <meta name="twitter:image" content="http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg" />
  <meta name="twitter:description" content=" Do you need to convince your friends and family that programming can be fun? Here is a story of how I managed to do that with F# at New Year's eve! I got a puzzle as a gift for Christmas and after a few days of failed attempts, I managed to solve it with F# in about 1 hour..." />
    
  <script type="application/ld+json">
  {
  	"@context": "http:\/\/schema.org",
  	"@type": "Article",
  	"name": "Solving fun puzzles with F#",
    "headline": "Solving fun puzzles with F#",
  	"description": " Do you need to convince your friends and family that programming can be fun? Here is a story of how I managed to do that with F# at New Year's eve! I got a puzzle as a gift for Christmas and after a few days of failed attempts, I managed to solve it with F# in about 1 hour...",
  	"url": "http://tomasp.net/blog/2014/puzzling-fsharp/",
  	"author": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	},
  	"creator": ["Tomas Petricek"],
  	"dateCreated": "2014-03-25T15:27:08.0544354+01:00",
  	"datePublished": "2014-03-25T15:27:08.0544354+01:00",
    "dateModified": "2014-03-25T15:27:08.0544354+01:00",
    "mainEntityOfPage": "http://tomasp.net/blog/2014/puzzling-fsharp/",
  	"image": "http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg",
  	"thumbnailUrl": "http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg",
  	"keywords": ["f#", "fun", "functional programming",  "tomas", "petricek"],
  	"inLanguage": "en-us",
  	"publisher": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
      "logo": "http://tomasp.net/img/favicon-big.png",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	}
  }  
  </script>

</head>
<body class="default">
    
  <span class="tplink"><a href="/">TP</a></span>

  <article class='article''>
    <h1>Solving fun puzzles with F#</h1>
<p>Do you need to convince your friends &amp; family that programming can be fun?
For the last Christmas, I got a puzzle as a gift. It is a number of small
cubes, joined together, that can be rotated and folded to form a bigger
(4x4x4) cube.</p>
<p>We spent the last few days of the year with family and a couple of friends
and I left the puzzle on the table. Every time I walked around, someone was
playing with it without much success. In the end, I said that if noone solves
it until 31 December, I'll write a program to do it. Which I did between 7 PM
and 8 PM and, voil√†, here is what I got...</p>
<div style="text-align:center;margin:10px">
<a href="http://tomasp.net/blog/2014/puzzling-fsharp/puzzle.jpg" target="_blank"><img src="http://tomasp.net/blog/2014/puzzling-fsharp/puzzle.jpg" style="height:200px;margin-right:20px;border-style:none" /></a>
<a href="http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg" target="_blank"><img src="http://tomasp.net/blog/2014/puzzling-fsharp/cube.jpg" style="height:200px;margin-left:20px;border-style:none" /></a>
</div>
<p>So, how do you solve a puzzle in about 1 hour on New Year's eve?</p>
<h2>Modeling the problem</h2>
<p>As with any problem in F#, we start by modeling the domain. The puzzle consists
of parts (small cubes) that have two important properties:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="t">Color</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="p">Black</span> | <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="p">White</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="t">Kind</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="p">Straight</span> | <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="p">Turn</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="t">Part</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 8)" onmouseover="showTip(event, 'fs1', 8)" class="t">Color</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs4', 9)" onmouseover="showTip(event, 'fs4', 9)" class="t">Kind</span>
</code></pre></td>
</tr>
</table>
<p>Each part has a color (black or white) and there are two kinds of parts. In one
kind, the string connecting the parts goes straight through the part (and so it
does not allow any useful rotation). In the other part, the string turns and
so the next part can point in one of four directions. Assuming the previous part
points from bottom to the top, we can now go to the front, back, left or right.</p>
<p>We'll also need to represent positions of the parts in the final cube and the
direction in which a part is pointing:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="t">Position</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="t">int</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="t">int</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 13)" onmouseover="showTip(event, 'fs9', 13)" class="t">int</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs10', 14)" onmouseover="showTip(event, 'fs10', 14)" class="t">Direction</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 15)" onmouseover="showTip(event, 'fs9', 15)" class="t">int</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 16)" onmouseover="showTip(event, 'fs9', 16)" class="t">int</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs9', 17)" onmouseover="showTip(event, 'fs9', 17)" class="t">int</span>
</code></pre></td>
</tr>
</table>
<p>Here, the position will be integers from 0 to 3 and direction will always contain
exactly one 1 or -1 value (with zeros for all other axes). We could make the model
more precise, but this will make calculations easy (note that we only have 1 hour
to finish :-)).</p>
<p>Now, the entire puzzle (first picture) is simply a list of parts:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs11', 18)" onmouseover="showTip(event, 'fs11', 18)" class="t">Shape</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="t">list</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs7', 20)" onmouseover="showTip(event, 'fs7', 20)" class="t">Part</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<p>The model so far can actually be understood by non-programmers. It has been
tested on humans (but only close relatives and friends!) and it worked fine :-).
This is one of the key strengths of domain modeling with F#...</p>
<h2>Implementing the algorithm</h2>
<p>The algorithm we'll implement is quite straightforward backtracking. We'll simulate
the different ways in which the puzzle can be folded (starting from 4 different
positions as others would be symmetric). When we hit a state that would not be valid
(there is a part already or the colors would not match), we'll go back and try
another folding.</p>
<p>When we have a <code>Straight</code> part, the next part of the puzzle will always be one
step further in the current direction. This is easy. The interesting thing is
when we have a <code>Turn</code> part - in that case we can go in four different directions,
which are calculated using the following functions:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Given &#39;Position&#39; and &#39;Direction&#39; calculate</span>
<span class="c">/// a new position (by adding the offsets)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 21)" onmouseover="showTip(event, 'fs13', 21)" class="f">move</span> (<span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="i">x</span>,<span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="i">y</span>,<span onmouseout="hideTip(event, 'fs16', 24)" onmouseover="showTip(event, 'fs16', 24)" class="i">z</span>) (<span onmouseout="hideTip(event, 'fs17', 25)" onmouseover="showTip(event, 'fs17', 25)" class="i">dx</span>,<span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="i">dy</span>,<span onmouseout="hideTip(event, 'fs19', 27)" onmouseover="showTip(event, 'fs19', 27)" class="i">dz</span>) <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs14', 28)" onmouseover="showTip(event, 'fs14', 28)" class="i">x</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs17', 29)" onmouseover="showTip(event, 'fs17', 29)" class="i">dx</span>, <span onmouseout="hideTip(event, 'fs15', 30)" onmouseover="showTip(event, 'fs15', 30)" class="i">y</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="i">dy</span>, <span onmouseout="hideTip(event, 'fs16', 32)" onmouseover="showTip(event, 'fs16', 32)" class="i">z</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs19', 33)" onmouseover="showTip(event, 'fs19', 33)" class="i">dz</span>)

<span class="c">/// For a &#39;Turn&#39; part oriented in the given &#39;Direction&#39;</span>
<span class="c">/// generate a list of possible next Directions</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 34)" onmouseover="showTip(event, 'fs20', 34)" class="f">offsets</span> (<span onmouseout="hideTip(event, 'fs17', 35)" onmouseover="showTip(event, 'fs17', 35)" class="i">dx</span>, <span onmouseout="hideTip(event, 'fs18', 36)" onmouseover="showTip(event, 'fs18', 36)" class="i">dy</span>, <span onmouseout="hideTip(event, 'fs19', 37)" onmouseover="showTip(event, 'fs19', 37)" class="i">dz</span>) <span class="o">=</span> 
  [ <span class="k">if</span> <span onmouseout="hideTip(event, 'fs17', 38)" onmouseover="showTip(event, 'fs17', 38)" class="i">dx</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs21', 39)" onmouseover="showTip(event, 'fs21', 39)" class="i">i</span> <span class="k">in</span> [<span class="o">-</span><span class="n">1</span>;<span class="n">1</span>] <span class="k">do</span> <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs21', 40)" onmouseover="showTip(event, 'fs21', 40)" class="i">i</span>, <span class="n">0</span>, <span class="n">0</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs18', 41)" onmouseover="showTip(event, 'fs18', 41)" class="i">dy</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs21', 42)" onmouseover="showTip(event, 'fs21', 42)" class="i">i</span> <span class="k">in</span> [<span class="o">-</span><span class="n">1</span>;<span class="n">1</span>] <span class="k">do</span> <span class="k">yield</span> <span class="n">0</span>, <span onmouseout="hideTip(event, 'fs21', 43)" onmouseover="showTip(event, 'fs21', 43)" class="i">i</span>, <span class="n">0</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs19', 44)" onmouseover="showTip(event, 'fs19', 44)" class="i">dz</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs21', 45)" onmouseover="showTip(event, 'fs21', 45)" class="i">i</span> <span class="k">in</span> [<span class="o">-</span><span class="n">1</span>;<span class="n">1</span>] <span class="k">do</span> <span class="k">yield</span> <span class="n">0</span>, <span class="n">0</span>, <span onmouseout="hideTip(event, 'fs21', 46)" onmouseover="showTip(event, 'fs21', 46)" class="i">i</span> ]

<span class="c">/// Given a current &#39;Position&#39; and &#39;Direction&#39;, get a list</span>
<span class="c">/// of possible new Directions and corresponding Positions</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 47)" onmouseover="showTip(event, 'fs22', 47)" class="f">rotate</span> <span onmouseout="hideTip(event, 'fs23', 48)" onmouseover="showTip(event, 'fs23', 48)" class="i">position</span> <span onmouseout="hideTip(event, 'fs24', 49)" onmouseover="showTip(event, 'fs24', 49)" class="i">direction</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs12', 50)" onmouseover="showTip(event, 'fs12', 50)" class="t">list</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 51)" onmouseover="showTip(event, 'fs10', 51)" class="t">Direction</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs8', 52)" onmouseover="showTip(event, 'fs8', 52)" class="t">Position</span><span class="o">&gt;</span> <span class="o">=</span> 
  [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs25', 53)" onmouseover="showTip(event, 'fs25', 53)" class="i">offs</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs20', 54)" onmouseover="showTip(event, 'fs20', 54)" class="f">offsets</span> <span onmouseout="hideTip(event, 'fs24', 55)" onmouseover="showTip(event, 'fs24', 55)" class="i">direction</span> <span class="k">-&gt;</span> 
      <span onmouseout="hideTip(event, 'fs25', 56)" onmouseover="showTip(event, 'fs25', 56)" class="i">offs</span>, <span onmouseout="hideTip(event, 'fs13', 57)" onmouseover="showTip(event, 'fs13', 57)" class="f">move</span> <span onmouseout="hideTip(event, 'fs23', 58)" onmouseover="showTip(event, 'fs23', 58)" class="i">position</span> <span onmouseout="hideTip(event, 'fs25', 59)" onmouseover="showTip(event, 'fs25', 59)" class="i">offs</span> ]
</code></pre></td>
</tr>
</table>
<p>To understand this part, you still do not need to be a programmer. And the
fact that we are writing just functions makes this quite easy too. However,
you definitely need some mathematical background.</p>
<h3>Checking valid moves</h3>
<p>The next part of the preparation is to write a function for checking whether
a move is valid. There are two conditions:</p>
<ul>
<li>A move is not valid if there is a part already at a given <code>Position</code>.</li>
<li>
We can only put parts inside the range of the cube (all coordinates are
within 0 .. 3)
</li>
<li>
The colors of the parts should match the pattern that you can see in 
the picture above.
</li>
</ul>
<p>We'll keep a set of occupied positions using immutable F# <code>Set</code>. For color
patterns, we can build a simple dictionary with expected colors - as the
pattern is regular, we can only store colors for smaller 2x2x2 cube (and then
check using <code>pos / 2</code>.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// A set of occupied positions</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs26', 60)" onmouseover="showTip(event, 'fs26', 60)" class="t">CubeState</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs27', 61)" onmouseover="showTip(event, 'fs27', 61)" class="t">Set</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 62)" onmouseover="showTip(event, 'fs8', 62)" class="t">Position</span><span class="o">&gt;</span>

<span class="c">/// Expected colors for each position</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 63)" onmouseover="showTip(event, 'fs28', 63)" class="i">colorMap</span> <span class="o">=</span> 
  [ (<span class="n">0</span>,<span class="n">0</span>,<span class="n">0</span>), <span onmouseout="hideTip(event, 'fs2', 64)" onmouseover="showTip(event, 'fs2', 64)" class="p">Black</span>; (<span class="n">0</span>,<span class="n">0</span>,<span class="n">1</span>), <span onmouseout="hideTip(event, 'fs3', 65)" onmouseover="showTip(event, 'fs3', 65)" class="p">White</span>;
    (<span class="n">0</span>,<span class="n">1</span>,<span class="n">0</span>), <span onmouseout="hideTip(event, 'fs3', 66)" onmouseover="showTip(event, 'fs3', 66)" class="p">White</span>; (<span class="n">1</span>,<span class="n">0</span>,<span class="n">0</span>), <span onmouseout="hideTip(event, 'fs3', 67)" onmouseover="showTip(event, 'fs3', 67)" class="p">White</span>;
    (<span class="n">1</span>,<span class="n">1</span>,<span class="n">1</span>), <span onmouseout="hideTip(event, 'fs3', 68)" onmouseover="showTip(event, 'fs3', 68)" class="p">White</span>; (<span class="n">1</span>,<span class="n">1</span>,<span class="n">0</span>), <span onmouseout="hideTip(event, 'fs2', 69)" onmouseover="showTip(event, 'fs2', 69)" class="p">Black</span>;
    (<span class="n">1</span>,<span class="n">0</span>,<span class="n">1</span>), <span onmouseout="hideTip(event, 'fs2', 70)" onmouseover="showTip(event, 'fs2', 70)" class="p">Black</span>; (<span class="n">0</span>,<span class="n">1</span>,<span class="n">1</span>), <span onmouseout="hideTip(event, 'fs2', 71)" onmouseover="showTip(event, 'fs2', 71)" class="p">Black</span> ] 
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs29', 72)" onmouseover="showTip(event, 'fs29', 72)" class="f">dict</span>
</code></pre></td>
</tr>
</table>
<p>The following <code>isValidPosition</code> function takes a <code>Position</code> and a current <code>CubeState</code>
and checks whether it is a valid position (we'll handle colors later):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Checks that the specified position is &quot;inside&quot; the</span>
<span class="c">/// cube and there is no part already in that place</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 73)" onmouseover="showTip(event, 'fs30', 73)" class="f">isValidPosition</span> <span onmouseout="hideTip(event, 'fs23', 74)" onmouseover="showTip(event, 'fs23', 74)" class="i">position</span> (<span onmouseout="hideTip(event, 'fs31', 75)" onmouseover="showTip(event, 'fs31', 75)" class="i">state</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs26', 76)" onmouseover="showTip(event, 'fs26', 76)" class="t">CubeState</span>) <span class="o">=</span> 
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 77)" onmouseover="showTip(event, 'fs14', 77)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs15', 78)" onmouseover="showTip(event, 'fs15', 78)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs16', 79)" onmouseover="showTip(event, 'fs16', 79)" class="i">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 80)" onmouseover="showTip(event, 'fs23', 80)" class="i">position</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 81)" onmouseover="showTip(event, 'fs32', 81)" class="i">free</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 82)" onmouseover="showTip(event, 'fs33', 82)" class="f">not</span> (<span onmouseout="hideTip(event, 'fs31', 83)" onmouseover="showTip(event, 'fs31', 83)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 84)" onmouseover="showTip(event, 'fs34', 84)" class="f">Contains</span>(<span onmouseout="hideTip(event, 'fs23', 85)" onmouseover="showTip(event, 'fs23', 85)" class="i">position</span>))
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 86)" onmouseover="showTip(event, 'fs35', 86)" class="i">inRange</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs14', 87)" onmouseover="showTip(event, 'fs14', 87)" class="i">x</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs15', 88)" onmouseover="showTip(event, 'fs15', 88)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs16', 89)" onmouseover="showTip(event, 'fs16', 89)" class="i">z</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> 
    <span onmouseout="hideTip(event, 'fs14', 90)" onmouseover="showTip(event, 'fs14', 90)" class="i">x</span> <span class="o">&lt;=</span> <span class="n">3</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs15', 91)" onmouseover="showTip(event, 'fs15', 91)" class="i">y</span> <span class="o">&lt;=</span> <span class="n">3</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs16', 92)" onmouseover="showTip(event, 'fs16', 92)" class="i">z</span> <span class="o">&lt;=</span> <span class="n">3</span>
  <span onmouseout="hideTip(event, 'fs32', 93)" onmouseover="showTip(event, 'fs32', 93)" class="i">free</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs35', 94)" onmouseover="showTip(event, 'fs35', 94)" class="i">inRange</span>
</code></pre></td>
</tr>
</table>
<p>This ignores the color constraints. Mainly because I added this later when solving the
puzzle. Surprisingly, it is quite important constraint - there are many more options without
the restriction on colors. We'll put the check in the main algorithm later.</p>
<h3>Generating moves</h3>
<p>Before looking at the main part, there are two more functions we need. Given a part
(which can be <code>Straight</code> or <code>Turn</code>), current position and direction and also the current
state, we want to get all valid directions and locations for the next part:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Given a current Position &amp; Direction and current</span>
<span class="c">/// Part, get a list of next Positions &amp; Directions</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 95)" onmouseover="showTip(event, 'fs36', 95)" class="f">getPositions</span> <span onmouseout="hideTip(event, 'fs23', 96)" onmouseover="showTip(event, 'fs23', 96)" class="i">position</span> <span onmouseout="hideTip(event, 'fs24', 97)" onmouseover="showTip(event, 'fs24', 97)" class="i">direction</span> <span onmouseout="hideTip(event, 'fs37', 98)" onmouseover="showTip(event, 'fs37', 98)" class="i">part</span> <span class="o">=</span> 
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs37', 99)" onmouseover="showTip(event, 'fs37', 99)" class="i">part</span> <span class="k">with</span> 
  | (_, <span onmouseout="hideTip(event, 'fs5', 100)" onmouseover="showTip(event, 'fs5', 100)" class="p">Straight</span>) <span class="k">-&gt;</span> [ <span onmouseout="hideTip(event, 'fs24', 101)" onmouseover="showTip(event, 'fs24', 101)" class="i">direction</span>, <span onmouseout="hideTip(event, 'fs13', 102)" onmouseover="showTip(event, 'fs13', 102)" class="f">move</span> <span onmouseout="hideTip(event, 'fs23', 103)" onmouseover="showTip(event, 'fs23', 103)" class="i">position</span> <span onmouseout="hideTip(event, 'fs24', 104)" onmouseover="showTip(event, 'fs24', 104)" class="i">direction</span> ]  
  | (_, <span onmouseout="hideTip(event, 'fs6', 105)" onmouseover="showTip(event, 'fs6', 105)" class="p">Turn</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 106)" onmouseover="showTip(event, 'fs22', 106)" class="f">rotate</span> <span onmouseout="hideTip(event, 'fs23', 107)" onmouseover="showTip(event, 'fs23', 107)" class="i">position</span> <span onmouseout="hideTip(event, 'fs24', 108)" onmouseover="showTip(event, 'fs24', 108)" class="i">direction</span>

<span class="c">/// Get next valid positions (with directions)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 109)" onmouseover="showTip(event, 'fs38', 109)" class="f">getValidPositions</span> <span onmouseout="hideTip(event, 'fs39', 110)" onmouseover="showTip(event, 'fs39', 110)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs40', 111)" onmouseover="showTip(event, 'fs40', 111)" class="i">dir</span> <span onmouseout="hideTip(event, 'fs37', 112)" onmouseover="showTip(event, 'fs37', 112)" class="i">part</span> <span onmouseout="hideTip(event, 'fs31', 113)" onmouseover="showTip(event, 'fs31', 113)" class="i">state</span> <span class="o">=</span>
  [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs40', 114)" onmouseover="showTip(event, 'fs40', 114)" class="i">dir</span>, <span onmouseout="hideTip(event, 'fs39', 115)" onmouseover="showTip(event, 'fs39', 115)" class="i">pos</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs36', 116)" onmouseover="showTip(event, 'fs36', 116)" class="f">getPositions</span> <span onmouseout="hideTip(event, 'fs39', 117)" onmouseover="showTip(event, 'fs39', 117)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs40', 118)" onmouseover="showTip(event, 'fs40', 118)" class="i">dir</span> <span onmouseout="hideTip(event, 'fs37', 119)" onmouseover="showTip(event, 'fs37', 119)" class="i">part</span> <span class="k">do</span>
      <span class="k">if</span> <span onmouseout="hideTip(event, 'fs30', 120)" onmouseover="showTip(event, 'fs30', 120)" class="f">isValidPosition</span> <span onmouseout="hideTip(event, 'fs39', 121)" onmouseover="showTip(event, 'fs39', 121)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs31', 122)" onmouseover="showTip(event, 'fs31', 122)" class="i">state</span> <span class="k">then</span> <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs40', 123)" onmouseover="showTip(event, 'fs40', 123)" class="i">dir</span>, <span onmouseout="hideTip(event, 'fs39', 124)" onmouseover="showTip(event, 'fs39', 124)" class="i">pos</span> ]
</code></pre></td>
</tr>
</table>
<h3>Backtracking using recursion</h3>
<p>So far, most of the code was quite easy. You can explain the type definitions
to people without any technical skills. Understanding the main algorithm
probably requires some programming background, but it is still surprisingly
simple.</p>
<p>We write a recursive function <code>solve</code> that keeps the current position and
direction (<code>pos</code> and <code>dir</code>), the current state of the cube (set of occupied
positions) and a <em>trace</em>. The trace is a list of places where we put cubes
earlier and this will contain the final result at the end.</p>
<p>The last parameter is <code>shape</code> which is the list of parts. As we iterate, we
always take out the head of the list and call the function recursively for
the tail (the rest of the list excluding the first part):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Recursive function that solves the puzzle using backtracking</span>
<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs41', 125)" onmouseover="showTip(event, 'fs41', 125)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs39', 126)" onmouseover="showTip(event, 'fs39', 126)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs40', 127)" onmouseover="showTip(event, 'fs40', 127)" class="i">dir</span> <span onmouseout="hideTip(event, 'fs31', 128)" onmouseover="showTip(event, 'fs31', 128)" class="i">state</span> <span onmouseout="hideTip(event, 'fs42', 129)" onmouseover="showTip(event, 'fs42', 129)" class="i">trace</span> (<span onmouseout="hideTip(event, 'fs43', 130)" onmouseover="showTip(event, 'fs43', 130)" class="i">shape</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs11', 131)" onmouseover="showTip(event, 'fs11', 131)" class="t">Shape</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs44', 132)" onmouseover="showTip(event, 'fs44', 132)" class="i">seq</span> {
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs43', 133)" onmouseover="showTip(event, 'fs43', 133)" class="i">shape</span>, <span onmouseout="hideTip(event, 'fs39', 134)" onmouseover="showTip(event, 'fs39', 134)" class="i">pos</span> <span class="k">with</span> 
  | [<span onmouseout="hideTip(event, 'fs45', 135)" onmouseover="showTip(event, 'fs45', 135)" class="i">part</span>], _ <span class="k">-&gt;</span> 
      <span class="c">// We have reached the end. Return the trace!</span>
      <span class="k">yield</span> (<span onmouseout="hideTip(event, 'fs46', 136)" onmouseover="showTip(event, 'fs46', 136)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 137)" onmouseover="showTip(event, 'fs47', 137)" class="f">rev</span> <span onmouseout="hideTip(event, 'fs42', 138)" onmouseover="showTip(event, 'fs42', 138)" class="i">trace</span>)
  | <span onmouseout="hideTip(event, 'fs45', 139)" onmouseover="showTip(event, 'fs45', 139)" class="i">part</span><span class="o">::</span><span onmouseout="hideTip(event, 'fs48', 140)" onmouseover="showTip(event, 'fs48', 140)" class="i">shape</span>, (<span onmouseout="hideTip(event, 'fs14', 141)" onmouseover="showTip(event, 'fs14', 141)" class="i">x</span>,<span onmouseout="hideTip(event, 'fs15', 142)" onmouseover="showTip(event, 'fs15', 142)" class="i">y</span>,<span onmouseout="hideTip(event, 'fs16', 143)" onmouseover="showTip(event, 'fs16', 143)" class="i">z</span>) <span class="k">when</span> <span onmouseout="hideTip(event, 'fs49', 144)" onmouseover="showTip(event, 'fs49', 144)" class="f">fst</span> <span onmouseout="hideTip(event, 'fs45', 145)" onmouseover="showTip(event, 'fs45', 145)" class="i">part</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 146)" onmouseover="showTip(event, 'fs28', 146)" class="i">colorMap</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs14', 147)" onmouseover="showTip(event, 'fs14', 147)" class="i">x</span><span class="o">/</span><span class="n">2</span>,<span onmouseout="hideTip(event, 'fs15', 148)" onmouseover="showTip(event, 'fs15', 148)" class="i">y</span><span class="o">/</span><span class="n">2</span>,<span onmouseout="hideTip(event, 'fs16', 149)" onmouseover="showTip(event, 'fs16', 149)" class="i">z</span><span class="o">/</span><span class="n">2</span>] <span class="k">-&gt;</span> 
      <span class="c">// Current part has the rigth color, get valid </span>
      <span class="c">// positions for the next part &amp; try all of them</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 150)" onmouseover="showTip(event, 'fs50', 150)" class="i">moves</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs38', 151)" onmouseover="showTip(event, 'fs38', 151)" class="f">getValidPositions</span> <span onmouseout="hideTip(event, 'fs39', 152)" onmouseover="showTip(event, 'fs39', 152)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs40', 153)" onmouseover="showTip(event, 'fs40', 153)" class="i">dir</span> <span onmouseout="hideTip(event, 'fs45', 154)" onmouseover="showTip(event, 'fs45', 154)" class="i">part</span> <span onmouseout="hideTip(event, 'fs31', 155)" onmouseover="showTip(event, 'fs31', 155)" class="i">state</span> 
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs40', 156)" onmouseover="showTip(event, 'fs40', 156)" class="i">dir</span>, <span onmouseout="hideTip(event, 'fs39', 157)" onmouseover="showTip(event, 'fs39', 157)" class="i">pos</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs50', 158)" onmouseover="showTip(event, 'fs50', 158)" class="i">moves</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 159)" onmouseover="showTip(event, 'fs42', 159)" class="i">trace</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 160)" onmouseover="showTip(event, 'fs39', 160)" class="i">pos</span><span class="o">::</span><span onmouseout="hideTip(event, 'fs42', 161)" onmouseover="showTip(event, 'fs42', 161)" class="i">trace</span>
        <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs41', 162)" onmouseover="showTip(event, 'fs41', 162)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs39', 163)" onmouseover="showTip(event, 'fs39', 163)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs40', 164)" onmouseover="showTip(event, 'fs40', 164)" class="i">dir</span> (<span onmouseout="hideTip(event, 'fs27', 165)" onmouseover="showTip(event, 'fs27', 165)" class="t">Set</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 166)" onmouseover="showTip(event, 'fs51', 166)" class="f">add</span> <span onmouseout="hideTip(event, 'fs39', 167)" onmouseover="showTip(event, 'fs39', 167)" class="i">pos</span> <span onmouseout="hideTip(event, 'fs31', 168)" onmouseover="showTip(event, 'fs31', 168)" class="i">state</span>) <span onmouseout="hideTip(event, 'fs42', 169)" onmouseover="showTip(event, 'fs42', 169)" class="i">trace</span> <span onmouseout="hideTip(event, 'fs48', 170)" onmouseover="showTip(event, 'fs48', 170)" class="i">shape</span> 
  | _ <span class="k">-&gt;</span> 
      <span class="c">// Current part does not have the right color</span>
      <span class="c">// (so we have to go back and try another layout)</span>
      () }
</code></pre></td>
</tr>
</table>
<p>The <code>solve</code> function uses pattern matching to handle three different cases:</p>
<ul>
<li>
<p>The pattern <code>[part]</code> checks that there is just one last part left.
In that case, we have a solution - because we already checked that the
position is legal. So, we just return the trace and reverse it to get
the steps from the first to the last.</p>
</li>
<li>
<p>The pattern <code>part::shape</code> checks that we have one or more parts and
gives us the first one as <code>part</code>. We also decompose the position into
<code>x,y,z</code> so that we can check whether the color of the part matches
the required color.</p>
<p>If all conditions are satisfied, we call <code>getValidPositions</code> to get
all valid positions for the next step, iterate over them and try to
return all possible results using <code>yield!</code> (more about this later).</p>
</li>
<li>
<p>The last case represents the case when the colors do not match. In this
situation, we just "do nothing" and return back to the previous step.</p>
</li>
</ul>
<p>Note that the whole function is wrapped in the <code>seq { .. }</code> block. This
means that we can generate all possible solutions (we return one using
the <code>yield</code> keyword). In practice, it turns out that they are all symmetric, but
this was an interesting experiment :-).</p>
<h2>Solving the puzzle</h2>
<p>So, we finally have all we need to solve the puzzle! Now comes the tedious
part, which is looking at the puzzle and noting down the exact sequence of
colors and kinds. I did this by writing down two strings:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 171)" onmouseover="showTip(event, 'fs52', 171)" class="i">puzzle</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs11', 172)" onmouseover="showTip(event, 'fs11', 172)" class="t">Shape</span> <span class="o">=</span> 
  <span class="c">// Lookup tables for different colors/kinds</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 173)" onmouseover="showTip(event, 'fs53', 173)" class="i">clrs</span>  <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 174)" onmouseover="showTip(event, 'fs29', 174)" class="f">dict</span> [<span class="s">&#39;b&#39;</span>, <span onmouseout="hideTip(event, 'fs2', 175)" onmouseover="showTip(event, 'fs2', 175)" class="p">Black</span>; <span class="s">&#39;w&#39;</span>, <span onmouseout="hideTip(event, 'fs3', 176)" onmouseover="showTip(event, 'fs3', 176)" class="p">White</span>]
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 177)" onmouseover="showTip(event, 'fs54', 177)" class="i">kinds</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 178)" onmouseover="showTip(event, 'fs29', 178)" class="f">dict</span> [<span class="s">&#39;s&#39;</span>, <span onmouseout="hideTip(event, 'fs5', 179)" onmouseover="showTip(event, 'fs5', 179)" class="p">Straight</span>; <span class="s">&#39;r&#39;</span>, <span onmouseout="hideTip(event, 'fs6', 180)" onmouseover="showTip(event, 'fs6', 180)" class="p">Turn</span>]
  <span class="c">// Read the string and build a list of &#39;Part&#39; values</span>
  ( <span class="s">&quot;bbbwwwwwwwwbbbbwwwbbbbbbwwwbbwbbwbbwwwwwbbbbbbwbwwwbbbbwwwwwbbww&quot;</span>,
    <span class="s">&quot;srssrrrrrrrrrrsrrssrrrrssrsrrrrrrsrsrrrrrrrrrsrrsrrsrrssrrrsrrss&quot;</span> )
  <span class="o">||&gt;</span> <span onmouseout="hideTip(event, 'fs55', 181)" onmouseover="showTip(event, 'fs55', 181)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs56', 182)" onmouseover="showTip(event, 'fs56', 182)" class="f">map2</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs57', 183)" onmouseover="showTip(event, 'fs57', 183)" class="i">clr</span> <span onmouseout="hideTip(event, 'fs58', 184)" onmouseover="showTip(event, 'fs58', 184)" class="i">kind</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs53', 185)" onmouseover="showTip(event, 'fs53', 185)" class="i">clrs</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs57', 186)" onmouseover="showTip(event, 'fs57', 186)" class="i">clr</span>], <span onmouseout="hideTip(event, 'fs54', 187)" onmouseover="showTip(event, 'fs54', 187)" class="i">kinds</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs58', 188)" onmouseover="showTip(event, 'fs58', 188)" class="i">kind</span>])
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs46', 189)" onmouseover="showTip(event, 'fs46', 189)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs59', 190)" onmouseover="showTip(event, 'fs59', 190)" class="f">ofSeq</span>
</code></pre></td>
</tr>
</table>
<p>To my surprise, I actually wrote this down correctly at the first attempt!
Now, we just call the <code>solve</code> function - we need to pick the first location
and the first direction. It turns out that starting in one of the corners works
fine. In that case, the direction does not matter (because they will all be
symmetric):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Pick starting location</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 191)" onmouseover="showTip(event, 'fs60', 191)" class="i">start</span> <span class="o">=</span> (<span class="n">0</span>, <span class="n">0</span>, <span class="n">0</span>)
<span class="c">// Run the &#39;solve&#39; function </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 192)" onmouseover="showTip(event, 'fs61', 192)" class="i">res</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 193)" onmouseover="showTip(event, 'fs41', 193)" class="f">solve</span> <span onmouseout="hideTip(event, 'fs60', 194)" onmouseover="showTip(event, 'fs60', 194)" class="i">start</span> (<span class="n">0</span>, <span class="n">0</span>, <span class="n">1</span>) (<span onmouseout="hideTip(event, 'fs62', 195)" onmouseover="showTip(event, 'fs62', 195)" class="f">set</span> [<span onmouseout="hideTip(event, 'fs60', 196)" onmouseover="showTip(event, 'fs60', 196)" class="i">start</span>]) [<span onmouseout="hideTip(event, 'fs60', 197)" onmouseover="showTip(event, 'fs60', 197)" class="i">start</span>] <span onmouseout="hideTip(event, 'fs52', 198)" onmouseover="showTip(event, 'fs52', 198)" class="i">puzzle</span> 

<span class="c">// Pick the first solution &amp; print positions</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs63', 199)" onmouseover="showTip(event, 'fs63', 199)" class="i">solution</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs55', 200)" onmouseover="showTip(event, 'fs55', 200)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 201)" onmouseover="showTip(event, 'fs64', 201)" class="f">head</span> <span onmouseout="hideTip(event, 'fs61', 202)" onmouseover="showTip(event, 'fs61', 202)" class="i">res</span> 
<span onmouseout="hideTip(event, 'fs63', 203)" onmouseover="showTip(event, 'fs63', 203)" class="i">solution</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs55', 204)" onmouseover="showTip(event, 'fs55', 204)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs65', 205)" onmouseover="showTip(event, 'fs65', 205)" class="f">iteri</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs21', 206)" onmouseover="showTip(event, 'fs21', 206)" class="i">i</span> <span onmouseout="hideTip(event, 'fs66', 207)" onmouseover="showTip(event, 'fs66', 207)" class="i">p</span> <span class="k">-&gt;</span> 
  <span onmouseout="hideTip(event, 'fs67', 208)" onmouseover="showTip(event, 'fs67', 208)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%d</span><span class="s"> - </span><span class="pf">%A</span><span class="s">&quot;</span> (<span onmouseout="hideTip(event, 'fs21', 209)" onmouseover="showTip(event, 'fs21', 209)" class="i">i</span><span class="o">+</span><span class="n">1</span>) <span onmouseout="hideTip(event, 'fs66', 210)" onmouseover="showTip(event, 'fs66', 210)" class="i">p</span>)
</code></pre></td>
</tr>
</table>
<p>This prints a sequence of X, Y and Z coordinates of the parts. With a bit of
effort, you can actually build the puzzle using this information, because you
always know where the next part should go. This is what I did at first.</p>
<p>But then I realized that I could do one more step and make the demo really fun!</p>
<h1>Building 3D visualization</h1>
<p>Some time ago, I wrote a simple library for composing 3D objects and it turns out
to be a perfect fit. The library provides a couple of primitive shapes like cube,
cone and cylinder and combinators for putting them together. Here is a simple example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Reference OpenTK library &amp; functional DSL</span>
<span class="prep">#r</span> <span class="s">&quot;OpenTK.dll&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;OpenTK.GLControl.dll&quot;</span>
<span class="prep">#load</span> <span class="s">&quot;functional3d.fs&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs68', 211)" onmouseover="showTip(event, 'fs68', 211)" class="i">Functional3D</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs69', 212)" onmouseover="showTip(event, 'fs69', 212)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 213)" onmouseover="showTip(event, 'fs70', 213)" class="i">Drawing</span>

<span class="c">// Create a yellow cylinder and compose it with</span>
<span onmouseout="hideTip(event, 'fs71', 214)" onmouseover="showTip(event, 'fs71', 214)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 215)" onmouseover="showTip(event, 'fs72', 215)" class="f">color</span> <span onmouseout="hideTip(event, 'fs73', 216)" onmouseover="showTip(event, 'fs73', 216)" class="t">Color</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 217)" onmouseover="showTip(event, 'fs74', 217)" class="i">Yellow</span> <span onmouseout="hideTip(event, 'fs71', 218)" onmouseover="showTip(event, 'fs71', 218)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs75', 219)" onmouseover="showTip(event, 'fs75', 219)" class="i">cylinder</span> <span class="o">$</span>
<span class="c">// a red cone that is translated in the Z direction</span>
<span onmouseout="hideTip(event, 'fs71', 220)" onmouseover="showTip(event, 'fs71', 220)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 221)" onmouseover="showTip(event, 'fs76', 221)" class="f">translate</span>
  (<span class="n">0.0</span>, <span class="n">0.0</span>, <span class="o">-</span><span class="n">1.0</span>)
  (<span onmouseout="hideTip(event, 'fs71', 222)" onmouseover="showTip(event, 'fs71', 222)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 223)" onmouseover="showTip(event, 'fs72', 223)" class="f">color</span> <span onmouseout="hideTip(event, 'fs73', 224)" onmouseover="showTip(event, 'fs73', 224)" class="t">Color</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs77', 225)" onmouseover="showTip(event, 'fs77', 225)" class="i">Red</span> <span onmouseout="hideTip(event, 'fs71', 226)" onmouseover="showTip(event, 'fs71', 226)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs78', 227)" onmouseover="showTip(event, 'fs78', 227)" class="i">cone</span>)
</code></pre></td>
</tr>
</table>
<div style="float:right">
<a href="tower.jpg" target="_blank"><img src="tower.jpg" style="height:150px;border-style:none" /></a>
</div>
<p>In just a two lines of code (if you do not try to format things nicely
for a blog), you can easily put together a simple tower!</p>
<p>By default, all objects are created in the middle of the world, so if
we want to compose them, we have to use <code>Fun.translate</code> to move them
around. Then you can use the <code>$</code> operator to combine multiple shapes
into a single one.</p>
<h2>Visualizing cube puzzle</h2>
<p>Building a visualization for the cube puzzle is quite simple. We write
a function <code>draw i</code> that takes the first <code>i</code> elements of the trace,
generates one cube for each of them and moves them to the right position:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Convert coordinate to float values</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 228)" onmouseover="showTip(event, 'fs79', 228)" class="f">fl</span> (<span onmouseout="hideTip(event, 'fs14', 229)" onmouseover="showTip(event, 'fs14', 229)" class="i">x</span>,<span onmouseout="hideTip(event, 'fs15', 230)" onmouseover="showTip(event, 'fs15', 230)" class="i">y</span>,<span onmouseout="hideTip(event, 'fs16', 231)" onmouseover="showTip(event, 'fs16', 231)" class="i">z</span>) <span class="o">=</span> 
  (<span onmouseout="hideTip(event, 'fs80', 232)" onmouseover="showTip(event, 'fs80', 232)" class="f">float</span> <span onmouseout="hideTip(event, 'fs14', 233)" onmouseover="showTip(event, 'fs14', 233)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs80', 234)" onmouseover="showTip(event, 'fs80', 234)" class="f">float</span> <span onmouseout="hideTip(event, 'fs15', 235)" onmouseover="showTip(event, 'fs15', 235)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs80', 236)" onmouseover="showTip(event, 'fs80', 236)" class="f">float</span> <span onmouseout="hideTip(event, 'fs16', 237)" onmouseover="showTip(event, 'fs16', 237)" class="i">z</span>)

<span class="c">/// Draw the first &#39;i&#39; steps of the puzzle</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 238)" onmouseover="showTip(event, 'fs81', 238)" class="f">draw</span> <span onmouseout="hideTip(event, 'fs21', 239)" onmouseover="showTip(event, 'fs21', 239)" class="i">i</span> <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs63', 240)" onmouseover="showTip(event, 'fs63', 240)" class="i">solution</span> 
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs55', 241)" onmouseover="showTip(event, 'fs55', 241)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs82', 242)" onmouseover="showTip(event, 'fs82', 242)" class="f">take</span> <span onmouseout="hideTip(event, 'fs21', 243)" onmouseover="showTip(event, 'fs21', 243)" class="i">i</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs55', 244)" onmouseover="showTip(event, 'fs55', 244)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs83', 245)" onmouseover="showTip(event, 'fs83', 245)" class="f">map</span> (<span class="k">fun</span> ((<span onmouseout="hideTip(event, 'fs14', 246)" onmouseover="showTip(event, 'fs14', 246)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs15', 247)" onmouseover="showTip(event, 'fs15', 247)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs16', 248)" onmouseover="showTip(event, 'fs16', 248)" class="i">z</span>) <span class="k">as</span> <span onmouseout="hideTip(event, 'fs66', 249)" onmouseover="showTip(event, 'fs66', 249)" class="i">p</span>) <span class="k">-&gt;</span> 
      <span class="c">// Get the expected color based on the color map</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 250)" onmouseover="showTip(event, 'fs84', 250)" class="i">color</span> <span class="o">=</span> 
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs28', 251)" onmouseover="showTip(event, 'fs28', 251)" class="i">colorMap</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs14', 252)" onmouseover="showTip(event, 'fs14', 252)" class="i">x</span><span class="o">/</span><span class="n">2</span>,<span onmouseout="hideTip(event, 'fs15', 253)" onmouseover="showTip(event, 'fs15', 253)" class="i">y</span><span class="o">/</span><span class="n">2</span>,<span onmouseout="hideTip(event, 'fs16', 254)" onmouseover="showTip(event, 'fs16', 254)" class="i">z</span><span class="o">/</span><span class="n">2</span>] <span class="o">=</span> <span onmouseout="hideTip(event, 'fs2', 255)" onmouseover="showTip(event, 'fs2', 255)" class="p">Black</span> <span class="k">then</span> 
          <span onmouseout="hideTip(event, 'fs73', 256)" onmouseover="showTip(event, 'fs73', 256)" class="t">Color</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs85', 257)" onmouseover="showTip(event, 'fs85', 257)" class="i">SaddleBrown</span> <span class="k">else</span> <span onmouseout="hideTip(event, 'fs73', 258)" onmouseover="showTip(event, 'fs73', 258)" class="t">Color</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs86', 259)" onmouseover="showTip(event, 'fs86', 259)" class="i">BurlyWood</span>
      <span class="c">// Create a cube, make it a bit smaller, change</span>
      <span class="c">// its color and move it to the right position</span>
      <span onmouseout="hideTip(event, 'fs71', 260)" onmouseover="showTip(event, 'fs71', 260)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 261)" onmouseover="showTip(event, 'fs87', 261)" class="i">cube</span>
      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 262)" onmouseover="showTip(event, 'fs71', 262)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 263)" onmouseover="showTip(event, 'fs88', 263)" class="f">scale</span> (<span class="n">0.95</span>,<span class="n">0.95</span>,<span class="n">0.95</span>)
      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 264)" onmouseover="showTip(event, 'fs71', 264)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 265)" onmouseover="showTip(event, 'fs72', 265)" class="f">color</span> <span onmouseout="hideTip(event, 'fs84', 266)" onmouseover="showTip(event, 'fs84', 266)" class="i">color</span>
      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 267)" onmouseover="showTip(event, 'fs71', 267)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 268)" onmouseover="showTip(event, 'fs76', 268)" class="f">translate</span> (<span onmouseout="hideTip(event, 'fs79', 269)" onmouseover="showTip(event, 'fs79', 269)" class="f">fl</span> <span onmouseout="hideTip(event, 'fs66', 270)" onmouseover="showTip(event, 'fs66', 270)" class="i">p</span>) )
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs55', 271)" onmouseover="showTip(event, 'fs55', 271)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs89', 272)" onmouseover="showTip(event, 'fs89', 272)" class="f">reduce</span> (<span class="o">$</span>)
</code></pre></td>
</tr>
</table>
<p>The function first generates a sequence of cubes and then composes them
into a single big 3D shape using the <code>Seq.reduce</code> function. This applies
the <code>$</code> operator gradually to all parts building the final object.</p>
<p>Now we can call this from a simple asynchronous loop that adds steps one-by-one,
with a 200ms delay between them:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs90', 273)" onmouseover="showTip(event, 'fs90', 273)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 274)" onmouseover="showTip(event, 'fs91', 274)" class="f">StartImmediate</span> <span class="o">&lt;|</span> <span onmouseout="hideTip(event, 'fs92', 275)" onmouseover="showTip(event, 'fs92', 275)" class="i">async</span> { 
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs21', 276)" onmouseover="showTip(event, 'fs21', 276)" class="i">i</span> <span class="k">in</span> <span class="n">1</span> <span class="o">..</span> <span class="n">64</span> <span class="k">do</span> 
    <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs90', 277)" onmouseover="showTip(event, 'fs90', 277)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs93', 278)" onmouseover="showTip(event, 'fs93', 278)" class="f">Sleep</span>(<span class="n">200</span>)
    <span onmouseout="hideTip(event, 'fs71', 279)" onmouseover="showTip(event, 'fs71', 279)" class="t">Fun</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 280)" onmouseover="showTip(event, 'fs94', 280)" class="f">show</span> (<span onmouseout="hideTip(event, 'fs81', 281)" onmouseover="showTip(event, 'fs81', 281)" class="f">draw</span> <span onmouseout="hideTip(event, 'fs21', 282)" onmouseover="showTip(event, 'fs21', 282)" class="i">i</span>) }
</code></pre></td>
</tr>
</table>
<p>The computation waits 200ms, then it builds the 3D model of the next step
and displays it using <code>Fun.show</code>. We start the computation using
<code>Async.StartImmediate</code>, which makes sure that all the processing is done
on the main user-interface thread and so we can access the UI elements and
actually update the control showing the visualization.</p>
<h2>Conclusions</h2>
<p>First of all, let the results speak for themselves:</p>
<div style="text-align:center;margin-left:auto;margin-right:auto;">
<iframe class="youtube-player" type="text/html" width="460" height="365" src="http://www.youtube.com/embed/w835_D0sgUc" allowfullscreen frameborder="0">
</iframe>
</div>
<p>I think it is quite amazing how much can be done in such a small number of lines
of code in so little amount of time.</p>
<p>After watching people play with the puzzle for a couple of days, I wrote most
of the code to solve the puzzle in about 1.5 hours during a New Year's afternoon
and eve and the puzzle was solved! This alone would be quite nice, but the fact
that I was able to add visualization in about 15 minutes made this really a nice
example of why programming with F# is fun :-).</p>
<p>So, if you want to impress your family and friends with your programming skills,
learning F# is most certainly the way to go!</p>


<div class="tip" id="fs1">type Color =<br />&#160;&#160;| Black<br />&#160;&#160;| White<br /><br />Full name: Puzzling-fsharp.Color</div>
<div class="tip" id="fs2">union case Color.Black: Color</div>
<div class="tip" id="fs3">union case Color.White: Color</div>
<div class="tip" id="fs4">type Kind =<br />&#160;&#160;| Straight<br />&#160;&#160;| Turn<br /><br />Full name: Puzzling-fsharp.Kind</div>
<div class="tip" id="fs5">union case Kind.Straight: Kind</div>
<div class="tip" id="fs6">union case Kind.Turn: Kind</div>
<div class="tip" id="fs7">type Part = Color * Kind<br /><br />Full name: Puzzling-fsharp.Part</div>
<div class="tip" id="fs8">type Position = int * int * int<br /><br />Full name: Puzzling-fsharp.Position</div>
<div class="tip" id="fs9">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs10">type Direction = int * int * int<br /><br />Full name: Puzzling-fsharp.Direction</div>
<div class="tip" id="fs11">type Shape = Part list<br /><br />Full name: Puzzling-fsharp.Shape</div>
<div class="tip" id="fs12">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs13">val move : x:int * y:int * z:int -&gt; dx:int * dy:int * dz:int -&gt; int * int * int<br /><br />Full name: Puzzling-fsharp.move<br /><em><br /><br />&#160;Given &#39;Position&#39; and &#39;Direction&#39; calculate<br />&#160;a new position (by adding the offsets)</em></div>
<div class="tip" id="fs14">val x : int</div>
<div class="tip" id="fs15">val y : int</div>
<div class="tip" id="fs16">val z : int</div>
<div class="tip" id="fs17">val dx : int</div>
<div class="tip" id="fs18">val dy : int</div>
<div class="tip" id="fs19">val dz : int</div>
<div class="tip" id="fs20">val offsets : dx:int * dy:int * dz:int -&gt; (int * int * int) list<br /><br />Full name: Puzzling-fsharp.offsets<br /><em><br /><br />&#160;For a &#39;Turn&#39; part oriented in the given &#39;Direction&#39;<br />&#160;generate a list of possible next Directions</em></div>
<div class="tip" id="fs21">val i : int</div>
<div class="tip" id="fs22">val rotate : int * int * int -&gt; int * int * int -&gt; (Direction * Position) list<br /><br />Full name: Puzzling-fsharp.rotate<br /><em><br /><br />&#160;Given a current &#39;Position&#39; and &#39;Direction&#39;, get a list<br />&#160;of possible new Directions and corresponding Positions</em></div>
<div class="tip" id="fs23">val position : int * int * int</div>
<div class="tip" id="fs24">val direction : int * int * int</div>
<div class="tip" id="fs25">val offs : int * int * int</div>
<div class="tip" id="fs26">type CubeState = Set&lt;Position&gt;<br /><br />Full name: Puzzling-fsharp.CubeState<br /><em><br /><br />&#160;A set of occupied positions</em></div>
<div class="tip" id="fs27">Multiple items<br />module Set<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Set&lt;&#39;T (requires comparison)&gt; =<br />&#160;&#160;interface IComparable<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;interface ICollection&lt;&#39;T&gt;<br />&#160;&#160;new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Add : value:&#39;T -&gt; Set&lt;&#39;T&gt;<br />&#160;&#160;member Contains : value:&#39;T -&gt; bool<br />&#160;&#160;override Equals : obj -&gt; bool<br />&#160;&#160;member IsProperSubsetOf : otherSet:Set&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;member IsProperSupersetOf : otherSet:Set&lt;&#39;T&gt; -&gt; bool<br />&#160;&#160;...<br /><br />Full name: Microsoft.FSharp.Collections.Set&lt;_&gt;<br /><br />--------------------<br />new : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt;</div>
<div class="tip" id="fs28">val colorMap : System.Collections.Generic.IDictionary&lt;(int * int * int),Color&gt;<br /><br />Full name: Puzzling-fsharp.colorMap<br /><em><br /><br />&#160;Expected colors for each position</em></div>
<div class="tip" id="fs29">val dict : keyValuePairs:seq&lt;&#39;Key * &#39;Value&gt; -&gt; System.Collections.Generic.IDictionary&lt;&#39;Key,&#39;Value&gt; (requires equality)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.dict</div>
<div class="tip" id="fs30">val isValidPosition : int * int * int -&gt; state:CubeState -&gt; bool<br /><br />Full name: Puzzling-fsharp.isValidPosition<br /><em><br /><br />&#160;Checks that the specified position is &quot;inside&quot; the<br />&#160;cube and there is no part already in that place</em></div>
<div class="tip" id="fs31">val state : CubeState</div>
<div class="tip" id="fs32">val free : bool</div>
<div class="tip" id="fs33">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs34">member Set.Contains : value:&#39;T -&gt; bool</div>
<div class="tip" id="fs35">val inRange : bool</div>
<div class="tip" id="fs36">val getPositions : int * int * int -&gt; int * int * int -&gt; &#39;a * Kind -&gt; ((int * int * int) * (int * int * int)) list<br /><br />Full name: Puzzling-fsharp.getPositions<br /><em><br /><br />&#160;Given a current Position &amp; Direction and current<br />&#160;Part, get a list of next Positions &amp; Directions</em></div>
<div class="tip" id="fs37">val part : &#39;a * Kind</div>
<div class="tip" id="fs38">val getValidPositions : int * int * int -&gt; int * int * int -&gt; &#39;a * Kind -&gt; state:CubeState -&gt; ((int * int * int) * (int * int * int)) list<br /><br />Full name: Puzzling-fsharp.getValidPositions<br /><em><br /><br />&#160;Get next valid positions (with directions)</em></div>
<div class="tip" id="fs39">val pos : int * int * int</div>
<div class="tip" id="fs40">val dir : int * int * int</div>
<div class="tip" id="fs41">val solve : int * int * int -&gt; int * int * int -&gt; state:CubeState -&gt; trace:(int * int * int) list -&gt; shape:Shape -&gt; seq&lt;(int * int * int) list&gt;<br /><br />Full name: Puzzling-fsharp.solve<br /><em><br /><br />&#160;Recursive function that solves the puzzle using backtracking</em></div>
<div class="tip" id="fs42">val trace : (int * int * int) list</div>
<div class="tip" id="fs43">val shape : Shape</div>
<div class="tip" id="fs44">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = System.Collections.Generic.IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs45">val part : Part</div>
<div class="tip" id="fs46">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs47">val rev : list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.rev</div>
<div class="tip" id="fs48">val shape : Part list</div>
<div class="tip" id="fs49">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs50">val moves : ((int * int * int) * (int * int * int)) list</div>
<div class="tip" id="fs51">val add : value:&#39;T -&gt; set:Set&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Set.add</div>
<div class="tip" id="fs52">val puzzle : Shape<br /><br />Full name: Puzzling-fsharp.puzzle</div>
<div class="tip" id="fs53">val clrs : System.Collections.Generic.IDictionary&lt;char,Color&gt;</div>
<div class="tip" id="fs54">val kinds : System.Collections.Generic.IDictionary&lt;char,Kind&gt;</div>
<div class="tip" id="fs55">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs56">val map2 : mapping:(&#39;T1 -&gt; &#39;T2 -&gt; &#39;U) -&gt; source1:seq&lt;&#39;T1&gt; -&gt; source2:seq&lt;&#39;T2&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map2</div>
<div class="tip" id="fs57">val clr : char</div>
<div class="tip" id="fs58">val kind : char</div>
<div class="tip" id="fs59">val ofSeq : source:seq&lt;&#39;T&gt; -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.ofSeq</div>
<div class="tip" id="fs60">val start : int * int * int<br /><br />Full name: Puzzling-fsharp.start</div>
<div class="tip" id="fs61">val res : seq&lt;(int * int * int) list&gt;<br /><br />Full name: Puzzling-fsharp.res</div>
<div class="tip" id="fs62">val set : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.set</div>
<div class="tip" id="fs63">val solution : (int * int * int) list<br /><br />Full name: Puzzling-fsharp.solution</div>
<div class="tip" id="fs64">val head : source:seq&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Seq.head</div>
<div class="tip" id="fs65">val iteri : action:(int -&gt; &#39;T -&gt; unit) -&gt; source:seq&lt;&#39;T&gt; -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Seq.iteri</div>
<div class="tip" id="fs66">val p : int * int * int</div>
<div class="tip" id="fs67">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs68">module Functional3D</div>
<div class="tip" id="fs69">namespace System</div>
<div class="tip" id="fs70">namespace System.Drawing</div>
<div class="tip" id="fs71">module Fun<br /><br />from Functional3D</div>
<div class="tip" id="fs72">val color : clr:Color -&gt; Drawing3D -&gt; Drawing3D<br /><br />Full name: Functional3D.Fun.color<br /><em><br /><br />&#160;Set color to be used when drawing the specified 3D objects</em></div>
<div class="tip" id="fs73">type Color =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;member A : byte<br />&#160;&#160;&#160;&#160;member B : byte<br />&#160;&#160;&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;&#160;&#160;member G : byte<br />&#160;&#160;&#160;&#160;member GetBrightness : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member GetHue : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member GetSaturation : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member IsEmpty : bool<br />&#160;&#160;&#160;&#160;member IsKnownColor : bool<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.Drawing.Color</div>
<div class="tip" id="fs74">property Color.Yellow: Color</div>
<div class="tip" id="fs75">val cylinder : Drawing3D<br /><br />Full name: Functional3D.Fun.cylinder<br /><em><br /><br />&#160;Generates a 3D cylinder object of a unit size</em></div>
<div class="tip" id="fs76">val translate : x:float * y:float * z:float -&gt; Drawing3D -&gt; Drawing3D<br /><br />Full name: Functional3D.Fun.translate<br /><em><br /><br />&#160;Move the specified object by the provided offsets</em></div>
<div class="tip" id="fs77">property Color.Red: Color</div>
<div class="tip" id="fs78">val cone : Drawing3D<br /><br />Full name: Functional3D.Fun.cone<br /><em><br /><br />&#160;Generate the sphere <br />&#160;Generates a 3D cylinder object of a unit size</em></div>
<div class="tip" id="fs79">val fl : x:int * y:int * z:int -&gt; float * float * float<br /><br />Full name: Puzzling-fsharp.fl<br /><em><br /><br />&#160;Convert coordinate to float values</em></div>
<div class="tip" id="fs80">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = System.Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs81">val draw : i:int -&gt; Drawing3D<br /><br />Full name: Puzzling-fsharp.draw<br /><em><br /><br />&#160;Draw the first &#39;i&#39; steps of the puzzle</em></div>
<div class="tip" id="fs82">val take : count:int -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.take</div>
<div class="tip" id="fs83">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs84">val color : Color</div>
<div class="tip" id="fs85">property Color.SaddleBrown: Color</div>
<div class="tip" id="fs86">property Color.BurlyWood: Color</div>
<div class="tip" id="fs87">val cube : Drawing3D<br /><br />Full name: Functional3D.Fun.cube<br /><em><br /><br />&#160;Creates a 3D cube of unit size using the current color</em></div>
<div class="tip" id="fs88">val scale : x:float * y:float * z:float -&gt; Drawing3D -&gt; Drawing3D<br /><br />Full name: Functional3D.Fun.scale<br /><em><br /><br />&#160;Scale the specified 3D object by the specified scales along the 3 axes</em></div>
<div class="tip" id="fs89">val reduce : reduction:(&#39;T -&gt; &#39;T -&gt; &#39;T) -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Seq.reduce</div>
<div class="tip" id="fs90">Multiple items<br />type Async<br />static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member CancelDefaultToken : unit -&gt; unit<br />static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg:&#39;Arg1 * beginAction:(&#39;Arg1 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * beginAction:(&#39;Arg1 * &#39;Arg2 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * arg3:&#39;Arg3 * beginAction:(&#39;Arg1 * &#39;Arg2 * &#39;Arg3 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromContinuations : callback:((&#39;T -&gt; unit) * (exn -&gt; unit) * (OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member Ignore : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;unit&gt;<br />static member OnCancel : interruption:(unit -&gt; unit) -&gt; Async&lt;IDisposable&gt;<br />static member Parallel : computations:seq&lt;Async&lt;&#39;T&gt;&gt; -&gt; Async&lt;&#39;T []&gt;<br />static member RunSynchronously : computation:Async&lt;&#39;T&gt; * ?timeout:int * ?cancellationToken:CancellationToken -&gt; &#39;T<br />static member Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;<br />static member Start : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions * ?cancellationToken:CancellationToken -&gt; Task&lt;&#39;T&gt;<br />static member StartChild : computation:Async&lt;&#39;T&gt; * ?millisecondsTimeout:int -&gt; Async&lt;Async&lt;&#39;T&gt;&gt;<br />static member StartChildAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions -&gt; Async&lt;Task&lt;&#39;T&gt;&gt;<br />static member StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartWithContinuations : computation:Async&lt;&#39;T&gt; * continuation:(&#39;T -&gt; unit) * exceptionContinuation:(exn -&gt; unit) * cancellationContinuation:(OperationCanceledException -&gt; unit) * ?cancellationToken:CancellationToken -&gt; unit<br />static member SwitchToContext : syncContext:SynchronizationContext -&gt; Async&lt;unit&gt;<br />static member SwitchToNewThread : unit -&gt; Async&lt;unit&gt;<br />static member SwitchToThreadPool : unit -&gt; Async&lt;unit&gt;<br />static member TryCancelled : computation:Async&lt;&#39;T&gt; * compensation:(OperationCanceledException -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member CancellationToken : Async&lt;CancellationToken&gt;<br />static member DefaultCancellationToken : CancellationToken<br /><br />Full name: Microsoft.FSharp.Control.Async<br /><br />--------------------<br />type Async&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Async&lt;_&gt;</div>
<div class="tip" id="fs91">static member Async.StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:System.Threading.CancellationToken -&gt; unit</div>
<div class="tip" id="fs92">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs93">static member Async.Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;</div>
<div class="tip" id="fs94">val show : drawing:Drawing3D -&gt; unit<br /><br />Full name: Functional3D.Fun.show<br /><em><br /><br />&#160;Display the specified 3D object on a form</em></div>


    <div class="info">
    <p class="share">
        <a target="_blank" href="https://twitter.com/intent/tweet?url=http%3a%2f%2ftomasp.net%2fblog%2f2014%2fpuzzling-fsharp%2f&amp;text=Solving+fun+puzzles+with+F%23via+%40tomaspetricek">
          <i class="fab fa-twitter-square"></i></a>
        <a target="_blank" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2ftomasp.net%2fblog%2f2014%2fpuzzling-fsharp%2f">
          <i class="fab fa-facebook-square"></i></a>
        <a href="http://www.reddit.com/submit?url=http%3a%2f%2ftomasp.net%2fblog%2f2014%2fpuzzling-fsharp%2f&title=Solving+fun+puzzles+with+F%23">
          <i class="fab fa-reddit-square"></i></a>
        <a href="mailto:?subject=Solving%20fun%20puzzles%20with%20F%23&body=%20Do%20you%20need%20to%20convince%20your%20friends%20and%20family%20that%20programming%20can%20be%20fun%3f%20Here%20is%20a%20story%20of%20how%20I%20managed%20to%20do%20that%20with%20F%23%20at%20New%20Year%27s%20eve!%20I%20got%20a%20puzzle%20as%20a%20gift%20for%20Christmas%20and%20after%20a%20few%20days%20of%20failed%20attempts%2c%20I%20managed%20to%20solve%20it%20with%20F%23%20in%20about%201%20hour...%0a%0aSee%3a%20http%3a%2f%2ftomasp.net%2fblog%2f2014%2fpuzzling-fsharp%2f">
          <i class="fa fa-envelope"></i></a>
    </p>
    <p class="details">
      <strong>Published:</strong> Tuesday, 25 March 2014, 3:27 PM<br />
      <strong>Author:</strong> Tomas Petricek<br />
      <strong>Typos:</strong> <a href="http://github.com/tpetricek/tomasp.net">Send me a pull request</a>!<br />
      
        <strong>Tags:</strong> <a
          href="/blog/tag/fsharp/">f#</a>, <a
          href="/blog/tag/fun/">fun</a>, <a
          href="/blog/tag/functional-programming/">functional programming</a></span><br />
      
    </p>
    </div>
  </article>


  <footer>
  <div class="footer-body">
    <div class="fl70"><div class="fmr">
      <h4><a href="http://tomasp.net/rss.xml"><i class="fa fa-rss" style="margin-right:5px;"></i></a> Blog archives</h4>
      <p>
      
      <a href="/blog/archive/february_2025/">February 2025 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2023/">December 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2023/">February 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2022/">September 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2022/">April 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2021/">October 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2021/">April 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2020/">October 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2020/">July 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2020/">April 2020 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2019/">December 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2019/">February 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2018/">November 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2018/">October 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2018/">May 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2017/">September 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2017/">June 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2017/">April 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2017/">March 2017 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2017/">January 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2016/">October 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2016/">September 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/august_2016/">August 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2016/">July 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2016/">May 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2016/">April 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2015/">December 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2015/">November 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2015/">September 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2015/">July 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2015/">June 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2015/">May 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2015/">April 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2015/">March 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2015/">February 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2015/">January 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2014/">December 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2014/">May 2014 (3)</a>,&nbsp;
      
      <a href="/blog/archive/april_2014/">April 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2014/">March 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2014/">January 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2013/">December 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2013/">November 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2013/">October 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2013/">September 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2013/">August 2013 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2013/">May 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2013/">April 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2013/">March 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2013/">February 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2013/">January 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2012/">December 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/october_2012/">October 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2012/">August 2012 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2012/">June 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2012/">April 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2012/">March 2012 (4)</a>,&nbsp;
      
      <a href="/blog/archive/february_2012/">February 2012 (5)</a>,&nbsp;
      
      <a href="/blog/archive/january_2012/">January 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2011/">November 2011 (5)</a>,&nbsp;
      
      <a href="/blog/archive/august_2011/">August 2011 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2011/">July 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/june_2011/">June 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2011/">May 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2011/">March 2011 (4)</a>,&nbsp;
      
      <a href="/blog/archive/december_2010/">December 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2010/">November 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2010/">October 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/september_2010/">September 2010 (4)</a>,&nbsp;
      
      <a href="/blog/archive/july_2010/">July 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2010/">June 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2010/">May 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2010/">February 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2010/">January 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/december_2009/">December 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2009/">July 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2009/">June 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2009/">May 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2009/">April 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2009/">March 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2009/">February 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2008/">December 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2008/">November 2008 (5)</a>,&nbsp;
      
      <a href="/blog/archive/october_2008/">October 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2008/">September 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2008/">June 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2008/">March 2008 (3)</a>,&nbsp;
      
      <a href="/blog/archive/february_2008/">February 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2007/">December 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2007/">November 2007 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2007/">October 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2007/">September 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2007/">August 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2007/">July 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2007/">April 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2007/">March 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2007/">February 2007 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2007/">January 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2006/">November 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2006/">October 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/august_2006/">August 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/july_2006/">July 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2006/">June 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2006/">May 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2006/">April 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2005/">December 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2005/">July 2005 (4)</a>,&nbsp;
      
      <a href="/blog/archive/june_2005/">June 2005 (5)</a>,&nbsp;
      
      <a href="/blog/archive/may_2005/">May 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2005/">April 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2005/">March 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2005/">January 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2004/">December 2004 (3)</a>,&nbsp;
      
      <a href="/blog/archive/november_2004/">November 2004 (2)</a>,&nbsp;
      
      </p>
    </div></div>
    <div class="fr30"><div class="fmr">
      <h4>License and about</h4>
      <p>All articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under the MIT License.
      </p>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>
        and <a href="http://dotliquidmarkup.org/">DotLiquid</a>.
        For more info, see the <a href="https://github.com/tpetricek/tomasp.net">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li><i class="fab fa-twitter"></i> Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li><i class="fab fa-github"></i> GitHub: <a href="https://github.com/tpetricek">@tpetricek</a></li>
        <li><i class="fa fa-envelope"></i> Email: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
      </ul>
      <p style="text-align:center;margin-top:15px;"><img src="https://tomasp.net/img/cc-sa.png" alt="CC License logo" /></p>
    </div></div>
  </div>
  </footer>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
