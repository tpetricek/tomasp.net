<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Droid+Sans+Mono&family=Kreon:wght@300;400;500;600&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="alternate" type="application/rss+xml" title="Latest news from Tomas Petricek" href="/rss.xml" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link href="/custom/style.css" rel="stylesheet">
  <link href="/custom/tooltips.css" rel="stylesheet">
  <script src="/custom/tooltips.js" type="text/javascript"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-big.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicon-big.png">
  <meta name="msapplication-TileColor" content="#004C6B">
  <meta name="msapplication-TileImage" content="/img/favicon-big.png">
  <meta name="theme-color" content="#004C6B">
  
  <title>Overload resolution in Phalanger - Tomas Petricek</title>

  <meta name="description" content=" PHP doesn't support method overloading, so Phalanger has to solve an interesting problem when calling overloaded .NET method from PHP." />
  <meta name="keywords" content="phalanger, " />  
  <meta name="author" content="Tomas Petricek" />
  <meta name="copyright" content="Tomas Petricek" />
  
  <meta property="og:title" content="Overload resolution in Phalanger" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://tomasp.net/blog/phalanger-overload-resolution.aspx/" />
  <meta property="og:image" content="" />
  <meta property="og:description" content=" PHP doesn't support method overloading, so Phalanger has to solve an interesting problem when calling overloaded .NET method from PHP." />
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@tomaspetricek">
  <meta name="twitter:creator" content="@tomaspetricek">  
  <meta name="twitter:title" content="Overload resolution in Phalanger" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:description" content=" PHP doesn't support method overloading, so Phalanger has to solve an interesting problem when calling overloaded .NET method from PHP." />
    
  <script type="application/ld+json">
  {
  	"@context": "http:\/\/schema.org",
  	"@type": "Article",
  	"name": "Overload resolution in Phalanger",
    "headline": "Overload resolution in Phalanger",
  	"description": " PHP doesn't support method overloading, so Phalanger has to solve an interesting problem when calling overloaded .NET method from PHP.",
  	"url": "http://tomasp.net/blog/phalanger-overload-resolution.aspx/",
  	"author": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	},
  	"creator": ["Tomas Petricek"],
  	"dateCreated": "2007-02-15T21:46:45.0000000",
  	"datePublished": "2007-02-15T21:46:45.0000000",
    "dateModified": "2007-02-15T21:46:45.0000000",
    "mainEntityOfPage": "http://tomasp.net/blog/phalanger-overload-resolution.aspx/",
  	"image": "",
  	"thumbnailUrl": "",
  	"keywords": ["phalanger",  "tomas", "petricek"],
  	"inLanguage": "en-us",
  	"publisher": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
      "logo": "http://tomasp.net/img/favicon-big.png",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	}
  }  
  </script>

</head>
<body class="default">
    
  <span class="tplink"><a href="/">TP</a></span>

  <article class='article''>
    <h1>Overload resolution in Phalanger</h1>
<p>PHP language itself doesn't method support overloading (having two methods with same name, but different number or types of parameters).
  This brings an interesting problem to Phalanger, because most of .NET languages support this and if we want to be able to call any .NET object
  from PHP we need to add support (at least) for calling of overloaded methods. The latest Phalanger release contains overload resolution described
  in the <em>Integrating PHP with CLR</em> document [<a href="#phpoverloadlnk">1</a>].</p>
<p>For example, when calling the <code>Console::WriteLine</code> method (which has a lot of overloads), Phalanger dynamically generates 
  a piece of code that we call dynamic stub, which is responsible for choosing the most appropriate overload depending on the actual
  parameter types. This stub is generated only once for every method, which makes this implementation very efficient. The difficult part of 
  overload resolution is, how can the stub determine what is the best overload? PHP language has a lot of implicit conversions, so 
  when you pass the string <code>"10.2 Little Piggies"</code> to a method it can be implicitly converted to float (<code>10.2</code>) 
  (For more details see [<a href="#phpoverloadlnk">2</a>]). Another example of implicit conversion is that any boolean value can be 
  converted to string (empty string or string <code>"0"</code> are converted to <code>false</code>, every other string is converted 
  to <code>true</code>).</p>  
  
<h2>Stubs in Phalanger beta 3</h2>
<p>Let's now look at the generated stubs in latest Phalanger releases. I was working on a demo to demonstrate Phalanger interoperability
  some time ago and I was a bit surprised with the result of the following code:</p>
<pre lang="php">
Console::WriteLine("Hello world!");
</pre>  
<p>I was expecting that <code>"Hello world!"</code> will appear in the console window, but it didn't! Instead it just printed <code>"true"</code>.
  The reason is that Phalanger used one of the implicit conversions described above and converted string to boolean. The generated stub first
  uses parameter count to determine what overloads might be compatible and than generates something like the following code (in pseudo-C#) 
  to choose the best overload (this is very simple situation, because method has only one parameter and no overload with <code>[Params]</code>
  attribute is involved, but it explains the problem well):</p>
<pre lang="csharp">
// Stub that chooses between foo(string), foo(int) and foo(bool)
object p = PopParameter();
bool bval;
int ival;
string sval;

if (Convert.ConvertToBool(p, out bval))
  return foo(bval);
if (Convert.ConvertToInt32(p, out ival))
  return foo(ival);
if (Convert.ConvertToString(p, out sval))
  return foo(sval);
throw new ConversionFailedException();  
</pre>  
<p>The conversion functions are called in some non-specified order, so in this case Phalanger first tries to convert parameter to bool.
  The <code>ConvertToBool</code> function tries to perform all implicit conversions and when the parameter is string it converts it
  to boolean and returns true, because it succeeded!</p>
<h2>Stubs in the future</h2>
<p>As I mentioned, PHP allows a lot of implicit conversions. The algorithm described above guarantees that it will convert parameters
  using acceptable conversion, but it doesn't always call the method that you would expect. That's why we
  decided to implement a bit more complex algorithm, which would prefer overloads that don't require any implicit conversions.
  The stub generated using the new algorithm looks like this:</p>
<pre lang="csharp">
// Stub that chooses between foo(string), foo(int) and foo(bool)
object p = PopParameter();
// To store conversion result
bool bval;
int ival;
string sval;

// Temporary variables
byte result;
int bestIndex;
byte bestResult = Byte.MaxValue;

// Perform conversions to specific types
result = Convert.ConvertToBool(p, out bval);
// Set the best overload index 
// (if result is better then result of previous conversions) 
if (result &lt; bestResult) 
  { bestResult = result; bestIndex = 0; }
// If this is the best match (no implicit conversion) 
// skip the rest of conversions and call the overload
if (result == BestConversion) 
  goto call;  

// Same as previous..
result = Convert.ConvertToInt32(p, out ival);
if (result &lt; bestResult) 
  { bestResult = result; bestIndex = 1; }
if (result == BestConversion) 
  goto call;

// Same as previous..
result = Convert.ConvertToString(p, out sval);
if (result &lt; bestResult) 
  { bestResult = result; bestIndex = 2; }
if (result == BestConversion) 
  goto call;

// No overload is appropriate
if (bestResult == FailedConversion) 
  throw new ConversionFailedException();  

// Call the best overload
call:;
switch(bestIndex)
{
  case 0: return foo(bval);
  case 1: return foo(ival);
  case 2: return foo(sval);
}
</pre>  
<p>In this code we use slightly modified version of <code>ConvertToXxx</code> methods. Instead of returning boolean value (whether conversion
  succeeded or not) it returns integral value that express how "good" was the conversion. For example if you pass value of type <code>integer</code>
  to the <code>ConvertToInt32</code> method, it returns the <code>BestConversion</code> constant, which is the least possible value. If you 
  pass <code>"10 little pigs"</code> string to the conversion method it successfully converts the parameter to integer, but returns higher value,
  so if there is an overload that accepts string as a parameter, it is preferred.</p>
<p>There are a lot of important details that I didn't write about, as well as interesting problems (for example when method has more parameters,
  some parameters are marked with the <code>[Params]</code> attribute, etc..), but I hope that this article helps you if you're interested
  in overload resolution algorithm in Phalanger. If you want to know more, leave me a note in the comments!</p>

<h2>Performance note</h2>
<p>Performance is very important in this area, because it affects every code that uses .NET classes in Phalanger.
  If you look at the stub code, you can see that after every conversion, Phalanger checks the return value and when it  
  equals <code>BestConversion</code>, the stub skips all remaining conversions and calls the best overload immediately.
  Thanks to this optimization the stub is as efficient as in the earlier Phalanger version in most of the situations.</p>  
  
<h2>References <a name="phpoverloadlnk"></a></h2>
<ul>
  <li>[1] <a href="http://www.php-compiler.net/lib/exe/fetch.php?media=integrating_php_with_clr.pdf">Phalanger: Integrating PHP with CLR</a> [<a href="http://www.php-compiler.net/lib/exe/fetch.php?media=integrating_php_with_clr.pdf" target="_blank">^</a>] - Ladislav Prosek, Tomas Matousek</li>
  <li>[2] <a href="http://www.php.net/manual/en/language.types.string.php">PHP: Strings</a> [<a href="http://www.php.net/manual/en/language.types.string.php" target="_blank">^</a>] - PHP Manual</li>
</ul>

    <div class="info">
    <p class="share">
        <a target="_blank" href="https://twitter.com/intent/tweet?url=http%3a%2f%2ftomasp.net%2fblog%2fphalanger-overload-resolution.aspx%2f&amp;text=Overload+resolution+in+Phalangervia+%40tomaspetricek">
          <i class="fab fa-twitter-square"></i></a>
        <a target="_blank" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2ftomasp.net%2fblog%2fphalanger-overload-resolution.aspx%2f">
          <i class="fab fa-facebook-square"></i></a>
        <a href="http://www.reddit.com/submit?url=http%3a%2f%2ftomasp.net%2fblog%2fphalanger-overload-resolution.aspx%2f&title=Overload+resolution+in+Phalanger">
          <i class="fab fa-reddit-square"></i></a>
        <a href="mailto:?subject=Overload%20resolution%20in%20Phalanger&body=%20PHP%20doesn%27t%20support%20method%20overloading%2c%20so%20Phalanger%20has%20to%20solve%20an%20interesting%20problem%20when%20calling%20overloaded%20.NET%20method%20from%20PHP.%0a%0aSee%3a%20http%3a%2f%2ftomasp.net%2fblog%2fphalanger-overload-resolution.aspx%2f">
          <i class="fa fa-envelope"></i></a>
    </p>
    <p class="details">
      <strong>Published:</strong> Thursday, 15 February 2007, 9:46 PM<br />
      <strong>Author:</strong> Tomas Petricek<br />
      <strong>Typos:</strong> <a href="http://github.com/tpetricek/tomasp.net">Send me a pull request</a>!<br />
      
        <strong>Tags:</strong> <a
          href="/blog/tag/phalanger/">phalanger</a></span><br />
      
    </p>
    </div>
  </article>


  <footer>
  <div class="footer-body">
    <div class="fl70"><div class="fmr">
      <h4><a href="http://tomasp.net/rss.xml"><i class="fa fa-rss" style="margin-right:5px;"></i></a> Blog archives</h4>
      <p>
      
      <a href="/blog/archive/december_2023/">December 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2023/">February 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2022/">September 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2022/">April 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2021/">October 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2021/">April 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2020/">October 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2020/">July 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2020/">April 2020 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2019/">December 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2019/">February 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2018/">November 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2018/">October 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2018/">May 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2017/">September 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2017/">June 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2017/">April 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2017/">March 2017 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2017/">January 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2016/">October 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2016/">September 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/august_2016/">August 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2016/">July 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2016/">May 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2016/">April 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2015/">December 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2015/">November 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2015/">September 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2015/">July 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2015/">June 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2015/">May 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2015/">April 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2015/">March 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2015/">February 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2015/">January 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2014/">December 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2014/">May 2014 (3)</a>,&nbsp;
      
      <a href="/blog/archive/april_2014/">April 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2014/">March 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2014/">January 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2013/">December 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2013/">November 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2013/">October 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2013/">September 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2013/">August 2013 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2013/">May 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2013/">April 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2013/">March 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2013/">February 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2013/">January 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2012/">December 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/october_2012/">October 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2012/">August 2012 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2012/">June 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2012/">April 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2012/">March 2012 (4)</a>,&nbsp;
      
      <a href="/blog/archive/february_2012/">February 2012 (5)</a>,&nbsp;
      
      <a href="/blog/archive/january_2012/">January 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2011/">November 2011 (5)</a>,&nbsp;
      
      <a href="/blog/archive/august_2011/">August 2011 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2011/">July 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/june_2011/">June 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2011/">May 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2011/">March 2011 (4)</a>,&nbsp;
      
      <a href="/blog/archive/december_2010/">December 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2010/">November 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2010/">October 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/september_2010/">September 2010 (4)</a>,&nbsp;
      
      <a href="/blog/archive/july_2010/">July 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2010/">June 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2010/">May 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2010/">February 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2010/">January 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/december_2009/">December 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2009/">July 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2009/">June 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2009/">May 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2009/">April 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2009/">March 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2009/">February 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2008/">December 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2008/">November 2008 (5)</a>,&nbsp;
      
      <a href="/blog/archive/october_2008/">October 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2008/">September 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2008/">June 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2008/">March 2008 (3)</a>,&nbsp;
      
      <a href="/blog/archive/february_2008/">February 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2007/">December 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2007/">November 2007 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2007/">October 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2007/">September 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2007/">August 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2007/">July 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2007/">April 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2007/">March 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2007/">February 2007 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2007/">January 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2006/">November 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2006/">October 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/august_2006/">August 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/july_2006/">July 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2006/">June 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2006/">May 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2006/">April 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2005/">December 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2005/">July 2005 (4)</a>,&nbsp;
      
      <a href="/blog/archive/june_2005/">June 2005 (5)</a>,&nbsp;
      
      <a href="/blog/archive/may_2005/">May 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2005/">April 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2005/">March 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2005/">January 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2004/">December 2004 (3)</a>,&nbsp;
      
      <a href="/blog/archive/november_2004/">November 2004 (2)</a>,&nbsp;
      
      </p>
    </div></div>
    <div class="fr30"><div class="fmr">
      <h4>License and about</h4>
      <p>All articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under the MIT License.
      </p>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>
        and <a href="http://dotliquidmarkup.org/">DotLiquid</a>.
        For more info, see the <a href="https://github.com/tpetricek/tomasp.net">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li><i class="fab fa-twitter"></i> Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li><i class="fab fa-github"></i> GitHub: <a href="https://github.com/tpetricek">@tpetricek</a></li>
        <li><i class="fa fa-envelope"></i> Email: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
      </ul>
      <p style="text-align:center;margin-top:15px;"><img src="https://tomasp.net/img/cc-sa.png" alt="CC License logo" /></p>
    </div></div>
  </div>
  </footer>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
