<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Droid+Sans+Mono&family=Kreon:wght@300;400;500;600&family=PT+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="alternate" type="application/rss+xml" title="Latest news from Tomas Petricek" href="/rss.xml" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link href="/custom/style.css" rel="stylesheet">
  <link href="/custom/tooltips.css" rel="stylesheet">
  <script src="/custom/tooltips.js" type="text/javascript"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-big.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicon-big.png">
  <meta name="msapplication-TileColor" content="#004C6B">
  <meta name="msapplication-TileImage" content="/img/favicon-big.png">
  <meta name="theme-color" content="#004C6B">
  
  <title>Tagged haskell - Latest writings from my blog - Tomas Petricek</title>
  <meta name="description" content="Tomas Petricek's latest blog posts about programming languages and tools, working with data, philosophy of science and more." />
  <meta name="author" content="Tomas Petricek" />
  <meta name="copyright" content="Tomas Petricek" />

</head>
<body class="default">
  
<span class="tplink"><a href="/">TP</a></span>

<article>
  
    <h1><a href="http://tomasp.net/blog/2013/computation-zoo-padl/">The F# Computation Expression Zoo (PADL'14)</a></h1>
    <p>F# <a href="http://msdn.microsoft.com/en-us/library/dd233182.aspx">computation expressions</a> are the
syntactic language mechanism that is used by features like sequence expressions and asynchronous
workflows. The aim of F# computation expressions is to provide a <em>single</em> syntactic mechanism
that provides convenient notation for writing a wide range of computations.</p>
<p>The syntactic mechanisms that are unified by computation expressions include Haskell <code>do</code>
notation and list comprehensions, C# iterators, asynchronous methods and LINQ queries,
Scala <code>for</code> comprehensions and Python generators to name just a few.</p>
<p>Some time ago, I started working on an academic article to explain what makes computation
expressions unique - and I think there is quite a few interesting aspects. Sadly, this is
often not very well explained and so the general perception is more like this...</p>



    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Friday, 8 November 2013, 7:42 AM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/fsharp/">f#</a>, <a
              href="/blog/tag/functional-programming/">functional programming</a>
        
        <br />
        <a href="http://tomasp.net/blog/2013/computation-zoo-padl/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/tree-zipper-query.aspx/">Processing trees with F# zipper computation</a></h1>
    <p>One of the less frequently advertised new features in F# 3.0 is the <em>query syntax</em>.
It is an extension that makes it possible to add custom operations in an F#
computation expression. The standard <code>query { .. }</code> computation uses this to define
operations such as sorting (<code>sortBy</code> and <code>sortByDescending</code>) or operations for taking
and skipping elements (<code>take</code>, <code>takeWhile</code>, ...). For example, you can write:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="k">query</span> <span class="pn">{</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">x</span> <span class="k">in</span> <span class="n">1</span> <span class="o">..</span> <span class="n">10</span> <span class="k">do</span>
        <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="k">take</span> <span class="n">3</span>
        <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="k">sortByDescending</span> <span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="id">x</span> <span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<p>In this article I'll use the same notation for processing trees using the <em>zipper</em>
pattern. I'll show how to define a computation that allows you to traverse a tree
and perform transformations on (parts) of the tree. For example, we'll be able to
say "Go to the left sub-tree, multiply all values by 2. Then go back and to the
right sub-tree and divide all values by 2" as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs45', 172)" onmouseover="showTip(event, 'fs45', 172)" class="k">tree</span> <span class="pn">{</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs2', 173)" onmouseover="showTip(event, 'fs2', 173)" class="id">x</span> <span class="k">in</span> <span class="id">sample</span> <span class="k">do</span>
       <span onmouseout="hideTip(event, 'fs49', 174)" onmouseover="showTip(event, 'fs49', 174)" class="k">left</span> 
       <span onmouseout="hideTip(event, 'fs50', 175)" onmouseover="showTip(event, 'fs50', 175)" class="k">map</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs2', 176)" onmouseover="showTip(event, 'fs2', 176)" class="id">x</span> <span class="o">*</span> <span class="n">2</span><span class="pn">)</span> 
       <span onmouseout="hideTip(event, 'fs51', 177)" onmouseover="showTip(event, 'fs51', 177)" class="k">up</span>
       <span onmouseout="hideTip(event, 'fs52', 178)" onmouseover="showTip(event, 'fs52', 178)" class="k">right</span>
       <span onmouseout="hideTip(event, 'fs50', 179)" onmouseover="showTip(event, 'fs50', 179)" class="k">map</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs2', 180)" onmouseover="showTip(event, 'fs2', 180)" class="id">x</span> <span class="o">/</span> <span class="n">2</span><span class="pn">)</span> 
       <span onmouseout="hideTip(event, 'fs53', 181)" onmouseover="showTip(event, 'fs53', 181)" class="k">top</span> <span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<p>This example behaves quite differently to the usual <code>query</code> computation. It mostly
relies on custom operations like <code>left</code>, <code>right</code> and <code>up</code> that allow us to navigate
through a tree (descend along the left or right sub-tree, go back to the parent node).
The only operation that <em>does something</em> is the <code>map</code> operation which transforms the
current sub-tree.</p>
<p>This was just a brief introduction to what is possible, so let's take a detailed look
at how this works...</p>
<div class="tip" id="fs1">val query : Linq.QueryBuilder</div>
<div class="tip" id="fs2">val x : int</div>
<div class="tip" id="fs3">custom operation: take (int)<br /><br />Calls Linq.QueryBuilder.Take</div>
<div class="tip" id="fs4">custom operation: sortByDescending (&#39;Key)<br /><br />Calls Linq.QueryBuilder.SortByDescending</div>
<div class="tip" id="fs5">union case Tree.Node: Tree&lt;&#39;T&gt; * Tree&lt;&#39;T&gt; -&gt; Tree&lt;&#39;T&gt;</div>
<div class="tip" id="fs6">type Tree&lt;&#39;T&gt; =<br />&#160;&#160;| Node of Tree&lt;&#39;T&gt; * Tree&lt;&#39;T&gt;<br />&#160;&#160;| Leaf of &#39;T<br />&#160;&#160;&#160;&#160;override ToString : unit -&gt; string</div>
<div class="tip" id="fs7">union case Tree.Leaf: &#39;T -&gt; Tree&lt;&#39;T&gt;</div>
<div class="tip" id="fs8">val x : Tree&lt;&#39;T&gt;</div>
<div class="tip" id="fs9">match x with<br />&#160;&#160;&#160;&#160;| Node(l, r) -&gt; sprintf &quot;(%O, %O)&quot; l r<br />&#160;&#160;&#160;&#160;| Leaf v -&gt; sprintf &quot;%O&quot; v</div>
<div class="tip" id="fs10">union case Path.Top: Path&lt;&#39;T&gt;</div>
<div class="tip" id="fs11">union case Path.Left: Path&lt;&#39;T&gt; * Tree&lt;&#39;T&gt; -&gt; Path&lt;&#39;T&gt;</div>
<div class="tip" id="fs12">type Path&lt;&#39;T&gt; =<br />&#160;&#160;| Top<br />&#160;&#160;| Left of Path&lt;&#39;T&gt; * Tree&lt;&#39;T&gt;<br />&#160;&#160;| Right of Path&lt;&#39;T&gt; * Tree&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;override ToString : unit -&gt; string</div>
<div class="tip" id="fs13">union case Path.Right: Path&lt;&#39;T&gt; * Tree&lt;&#39;T&gt; -&gt; Path&lt;&#39;T&gt;</div>
<div class="tip" id="fs14">val x : Path&lt;&#39;T&gt;</div>
<div class="tip" id="fs15">match x with<br />&#160;&#160;&#160;&#160;| Top -&gt; &quot;T&quot;<br />&#160;&#160;&#160;&#160;| Left(p, t) -&gt; sprintf &quot;L(%O, %O)&quot; p t<br />&#160;&#160;&#160;&#160;| Right(p, t) -&gt; sprintf &quot;R(%O, %O)&quot; p t</div>
<div class="tip" id="fs16">union case TreeZipper.TZ: Tree&lt;&#39;T&gt; * Path&lt;&#39;T&gt; -&gt; TreeZipper&lt;&#39;T&gt;</div>
<div class="tip" id="fs17">val x : TreeZipper&lt;&#39;T&gt;</div>
<div class="tip" id="fs18">let (TZ(t, p)) = x in sprintf &quot;%O [%O]&quot; t p</div>
<div class="tip" id="fs19">val left : _arg1:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br /><em><br /><br />&#160;Navigates to the left sub-tree</em></div>
<div class="tip" id="fs20">val failwith : message:string -&gt; &#39;T</div>
<div class="tip" id="fs21">val l : Tree&lt;&#39;a&gt;</div>
<div class="tip" id="fs22">val r : Tree&lt;&#39;a&gt;</div>
<div class="tip" id="fs23">val p : Path&lt;&#39;a&gt;</div>
<div class="tip" id="fs24">val right : _arg1:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br /><em><br /><br />&#160;Navigates to the right sub-tree</em></div>
<div class="tip" id="fs25">val current : _arg1:TreeZipper&lt;&#39;a&gt; -&gt; &#39;a<br /><em><br /><br />&#160;Gets the value at the current position</em></div>
<div class="tip" id="fs26">val x : &#39;a</div>
<div class="tip" id="fs27">val up : _arg1:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;</div>
<div class="tip" id="fs28">val top : _arg1:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;</div>
<div class="tip" id="fs29">val t : TreeZipper&lt;&#39;a&gt;</div>
<div class="tip" id="fs30">val tz : TreeZipper&lt;&#39;a&gt;</div>
<div class="tip" id="fs31">Multiple items<br />val unit : v:&#39;a -&gt; TreeZipper&lt;&#39;a&gt;<br /><em><br /><br />&#160;Build tree zipper with singleton tree</em><br /><br />--------------------<br />type unit = Unit</div>
<div class="tip" id="fs32">val v : &#39;a</div>
<div class="tip" id="fs33">val bindSub : f:(&#39;a -&gt; TreeZipper&lt;&#39;a&gt;) -&gt; treeZip:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br /><em><br /><br />&#160;Transform leaves in the current sub-tree of &#39;treeZip&#39;<br />&#160;into other trees using the provided function &#39;f&#39;</em></div>
<div class="tip" id="fs34">val f : (&#39;a -&gt; TreeZipper&lt;&#39;a&gt;)</div>
<div class="tip" id="fs35">val treeZip : TreeZipper&lt;&#39;a&gt;</div>
<div class="tip" id="fs36">val bindT : (Tree&lt;&#39;a&gt; -&gt; Tree&lt;&#39;a&gt;)</div>
<div class="tip" id="fs37">val t : Tree&lt;&#39;a&gt;</div>
<div class="tip" id="fs38">val current : Tree&lt;&#39;a&gt;</div>
<div class="tip" id="fs39">val path : Path&lt;&#39;a&gt;</div>
<div class="tip" id="fs40">Multiple items<br />type TreeZipperBuilder =<br />&#160;&#160;new : unit -&gt; TreeZipperBuilder<br />&#160;&#160;member Current : tz:TreeZipper&lt;&#39;a&gt; -&gt; &#39;a<br />&#160;&#160;member Current : tz:TreeZipper&lt;&#39;a&gt; -&gt; &#39;a<br />&#160;&#160;member For : tz:TreeZipper&lt;&#39;T&gt; * f:(&#39;T -&gt; TreeZipper&lt;&#39;T&gt;) -&gt; TreeZipper&lt;&#39;T&gt;<br />&#160;&#160;member Left : tz:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;member Left : tz:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;member Right : tz:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;member Right : tz:TreeZipper&lt;&#39;a&gt; -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;member Select : tz:TreeZipper&lt;&#39;a&gt; * f:(&#39;a -&gt; &#39;a) -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;member Select : tz:TreeZipper&lt;&#39;a&gt; * f:(&#39;a -&gt; &#39;a) -&gt; TreeZipper&lt;&#39;a&gt;<br />&#160;&#160;...<br /><br />--------------------<br />new : unit -&gt; TreeZipperBuilder</div>
<div class="tip" id="fs41">val x : TreeZipperBuilder</div>
<div class="tip" id="fs42">val tz : TreeZipper&lt;&#39;T&gt;</div>
<div class="tip" id="fs43">type TreeZipper&lt;&#39;T&gt; =<br />&#160;&#160;| TZ of Tree&lt;&#39;T&gt; * Path&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;override ToString : unit -&gt; string</div>
<div class="tip" id="fs44">val f : (&#39;T -&gt; TreeZipper&lt;&#39;T&gt;)</div>
<div class="tip" id="fs45">val tree : TreeZipperBuilder<br /><em><br /><br />&#160;Global instance of the computation builder</em></div>
<div class="tip" id="fs46">Multiple items<br />type CustomOperationAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : name:string -&gt; CustomOperationAttribute<br />&#160;&#160;member AllowIntoPattern : bool<br />&#160;&#160;member IsLikeGroupJoin : bool<br />&#160;&#160;member IsLikeJoin : bool<br />&#160;&#160;member IsLikeZip : bool<br />&#160;&#160;member JoinConditionWord : string<br />&#160;&#160;member MaintainsVariableSpace : bool<br />&#160;&#160;member MaintainsVariableSpaceUsingBind : bool<br />&#160;&#160;member Name : string<br />&#160;&#160;...<br /><br />--------------------<br />new : name:string -&gt; CustomOperationAttribute</div>
<div class="tip" id="fs47">Multiple items<br />type ProjectionParameterAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; ProjectionParameterAttribute<br /><br />--------------------<br />new : unit -&gt; ProjectionParameterAttribute</div>
<div class="tip" id="fs48">val f : (&#39;a -&gt; &#39;a)</div>
<div class="tip" id="fs49">custom operation: left<br /><br />Calls TreeZipperBuilder.Left</div>
<div class="tip" id="fs50">custom operation: map (&#39;a)<br /><br />Calls TreeZipperBuilder.Select<br /><em><br /><br />&#160;Transform the current sub-tree using &#39;f&#39;</em></div>
<div class="tip" id="fs51">custom operation: up<br /><br />Calls TreeZipperBuilder.Up</div>
<div class="tip" id="fs52">custom operation: right<br /><br />Calls TreeZipperBuilder.Right</div>
<div class="tip" id="fs53">custom operation: top<br /><br />Calls TreeZipperBuilder.Top</div>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Wednesday, 19 December 2012, 2:22 PM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/fsharp/">f#</a>, <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/monads/">monads</a>, <a
              href="/blog/tag/linq/">linq</a>
        
        <br />
        <a href="http://tomasp.net/blog/tree-zipper-query.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/applicative-functors.aspx/">Applicative functors: definition and syntax</a></h1>
    
<p>In a recent blog post, <a href="http://blog.ezyang.com/2012/08/applicative-functors/" title="Edward Z. Yang: Applicative functors">Edward Z. Yang talks about applicative functors</a>. 
He mentions two equivalent definitions of applicative functors - the standard
definition used in Haskell libraries (<code>Applicative</code>) and an alternative that
has been also presented in the <a href="http://www.soi.city.ac.uk/~ross/papers/Applicative.html" title="C. McBride and R. Paterson: Applicative Programming with Effects">original paper</a>, but is generally less
familiar (<code>Monoidal</code>).</p>

<p>The standard definition makes a perfect sense with the standard uses in Haskell,
however I always preferred the alternative definition. Edward uses the alternative
(<code>Monoidal</code>) definition to explain the laws that should hold about applicative 
functors and to explain <em>commutative</em> applicative functors, but I think it
is even more useful.</p>

<p>The <code>Monoidal</code> definition fits nicely with a trick that you can use to 
<a href="http://tomasp.net/blog/idioms-in-linq.aspx" title="T. Petricek: Beyond the Monad fashion (I.): Writing idioms in LINQ">encode applicative functors in C# using LINQ</a> and I also used it as 
a basis for an F# syntax extension that allows writing code using applicative 
functors in a similar style as using monads (which is discussed in my draft 
paper about <a href="http://www.cl.cam.ac.uk/~tp322/papers/notations.html" title="T. Petricek and D. Syme: Syntax Matters: Writing abstract computations in F#">writing abstract computations in F#</a>). And I also think that
<em>commutative</em> applicative functors deserve more attention.</p>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Tuesday, 21 August 2012, 2:23 PM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/fsharp/">f#</a>
        
        <br />
        <a href="http://tomasp.net/blog/applicative-functors.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/fsharp-academia.aspx/">F# in Academia: Present at upcoming events!</a></h1>
    
<p>The F# language was born as a combination of the pragmatic and real-world .NET 
platform and functional programming, which had a long tradition in academia. 
Many useful ideas or libraries in F# (like <em>asynchronous workflows</em> and 
<em>first-class events</em>) are inspored by research in functional programming
(namely, the work on <em>monads</em>, <em>continuations</em> and <em>functional reactive programming</em>).</p>

<p>Exchanging the ideas between the research community and the real-world is one
of the areas where F# excels. Indeed, the first applicatiosn of F# inside Microsoft
(in the Machine Learning group at Cambridge) were all about this - combining
research in machine learning with a language that can be easily used in practice.</p>

<p>However, F# and the F# users also made numerous contributions to the programming
language research community. Influential ideas that come from F# include 
<em>active patterns</em> and the F# style of <em>meta-programming</em> for translating F# to 
JavaScript). I think there is a lot more that the academic community can learn
from the F# community, so I'd like to invite you to talk about your ideas 
at two upcoming academic events!</p>

<p>What, why, when, where and how? <a href="http://tomasp.net/blog/fsharp-academia.aspx">Continue reading!</a></p>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Monday, 16 April 2012, 12:19 AM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/presentations/">presentations</a>, <a
              href="/blog/tag/fsharp/">f#</a>, <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/research/">research</a>
        
        <br />
        <a href="http://tomasp.net/blog/fsharp-academia.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/docase-haskell.aspx/">Extending Monads with Pattern Matching (Haskell 2011)</a></h1>
    
<p>Some time ago, I wrote a <a href="http://tomasp.net/blog/match-bang-paper.aspx">paper about <em>joinads</em></a> and the <code>match!</code> extension
  of the F# language. The paper was quite practically oriented and didn't go into much details about 
  the theory behind <em>joinads</em>. Many of the examples from the F# version relied on some
  imperative features of F#. I believe that this is useful for parctical programming, but I 
  also wanted to show that the same idea can work in the <em>purely functional</em> context.</p>

<p>To show that joinads work in the pure setting, I created a Haskell version of the idea.
  The implementation (available below) is quite simple and consists of a pre-processor for 
  Haskell source files and numerous examples. However, more important part of the recent work of 
  joinads is a more detailed theoretical background.</p>

<p>The theory of joinads, together with the language design of Haskell extension that implements
  it is discussed in a paper <em>Extending Monads with Pattern Matching</em>, which was accepted
  for publication at the <a href="http://www.haskell.org/haskell-symposium/2011/index.html">Haskell 
  Symposium 2011</a>. Here is the abstract of the paper:</p>

      <p style="padding-left:60px;padding-right:60px;font-style:italic;">
      Sequencing of effectful computations can be neatly captured using monads and elegantly written using 
      <code>do</code> notation. In practice such monads often allow additional ways of composing computations, 
      which have to be written explicitly using combinators.
      </p><p style="padding-left:60px;padding-right:60px;font-style:italic;">
      We identify joinads, an abstract notion of computation that is stronger than monads and captures
      many such ad-hoc extensions. In particular, joinads are monads with three additional operations: 
      one of type <code>m a -> m b -> m (a, b)</code> captures various forms of <em>parallel composition</em>, 
      one of type <code>m a -> m a -> m a</code> that is inspired by <em>choice</em> and one of type <code>m a -> m (m a)</code> 
      that captures <em>aliasing</em> of computations. Algebraically, the first two operations form a 
      near-semiring with commutative multiplication.
      </p><p style="padding-left:60px;padding-right:60px;font-style:italic;">
      We introduce <code>docase</code> notation that can be viewed as a monadic version of <code>case</code>. Joinad laws
      make it possible to prove various syntactic equivalences of programs written using <code>docase</code> 
      that are analogous to equivalences about <code>case</code>. Examples of joinads that benefit from the notation
      include speculative parallelism, waiting for a combination of user interface events, but also 
      encoding of validation rules using the intersection of parsers.
      </p>
<p>Links to the full paper, source code and additional materials are <a href="http://tomasp.net/blog/docase-haskell.aspx#dscl">available below</a>.</p>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Wednesday, 20 July 2011, 12:19 AM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/parallel/">parallel</a>, <a
              href="/blog/tag/writing/">writing</a>, <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/joinads/">joinads</a>
        
        <br />
        <a href="http://tomasp.net/blog/docase-haskell.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/comprefun.aspx/">Fun with parallel monad comprehensions (The Monad.Reader)</a></h1>
    
<p style="font-style:italic;">
This article is a re-publication of an article that I wrote some time ago for 
<a href="http://themonadreader.wordpress.com/">The Monad.Reader</a> magazine, which is an
online magazine about functional programming and Haskell. You can also
read the article in the original PDF format as part of the <a href="http://themonadreader.files.wordpress.com/2011/07/issue18.pdf">Issue 18</a>
(together with two other interesting articles). The samples from the article can be found <a href="https://github.com/tpetricek/Haskell.Joinads">on Github</a>.
</p>

<p>Monad comprehensions have an interesting history. They were the first syntactic extension for 
programming with monads. They were implemented in Haskell, but later replaced with plain list
comprehensions and monadic <code>do</code> notation. Now, monad comprehensions are back in Haskell,
more powerful than ever before!</p>

<p>Redesigned monad comprehensions generalize the syntax for working with lists. Quite interestingly, 
they also generalize syntax for zipping, grouping and ordering of lists. This article shows how to 
use some of the new expressive power when working with well-known monads. You'll learn what 
"parallel composition" means for parsers, a poor man's concurrency monad and an evaluation 
order monad.</p>

<ul>
  <li><a href="http://tomasp.net/blog/comprefun.aspx">Continue reading on the web...</a></li>
  <li><a href="http://themonadreader.files.wordpress.com/2011/07/issue18.pdf">Get The Monad.Reader Issue 18</a> (PDF)</li>
</ul>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Tuesday, 19 July 2011, 11:28 PM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/parallel/">parallel</a>
        
        <br />
        <a href="http://tomasp.net/blog/comprefun.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  
    <h1><a href="http://tomasp.net/blog/speculative-par-monad.aspx/">Explicit speculative parallelism for Haskell's Par monad</a></h1>
    
<p>Haskell provides quite a few ways for writing parallel programs, but none of them is fully automatic.
  The programmer has to use some annotations or library to run computations in parallel <em>explicitly</em>. 
  The most recent paper (and library) for writing parallel programs follows the latter approach. You can find more
  information about the library in a paper by Simon Marlow et al. <a type="external" href="http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/monad-par.pdf">A
  monad for deterministic parallelism</a> and it is also available on <a href="http://hackage.haskell.org/package/monad-par" type="external">Hackage</a>.
  However, I'll explain all the important bits that I'll use in this article.</p>

<p>The library provides an explicit way for writing parallel programs using a <code>Par</code> monad. The library contains 
  constructs for spawning computations and sharing state using blocking variables. However, the whole programming model
  is fully deterministic. I believe that it is sometimes useful to lift the determinacy requirement.
  Some programs are deterministic, but the fact cannot be (easily) automatically verified. For example, say you have two functions
  <code>fib1</code> and <code>fib2</code>. They both give the same result, but each of them is more efficient
  than the other one on certain inputs. To calculate a Fibonacci number, the program could <em>speculatively</em> 
  try to evaluate both functions in parallel and return the result of the one that finishes first.</p>

<p>Unfortunately, this cannot be safely implemented using a fully deterministic library. In this article, I'll show some
  examples where speculative parallelism can be useful and I'll talk about an extension to the <code>Par</code> monad
  that I implemented (available on <a href="https://github.com/tpetricek/Haskell.ParMonad">GitHub</a>). The extension allows 
  programmers to write <em>speculative computations</em>, provided that they manually verify that their code is 
  deterministic. </p>

    <div class="info">
      <p class="details">
        <strong>Published</strong>: <span>Tuesday, 17 May 2011, 1:59 PM</span>
        
          <br />
          <strong>Tags</strong>:
            <a
              href="/blog/tag/research/">research</a>, <a
              href="/blog/tag/haskell/">haskell</a>, <a
              href="/blog/tag/parallel/">parallel</a>
        
        <br />
        <a href="http://tomasp.net/blog/speculative-par-monad.aspx/">Read the complete article</a><br /><br />
      </p>
    </div>
  

  <h1>All blog posts by tag</h1>
  
  <a
    href="/blog/tag/fsharp/">f# (112)</a>, <a
    href="/blog/tag/functional/">functional (66)</a>, <a
    href="/blog/tag/research/">research (50)</a>, <a
    href="/blog/tag/csharp/">c# (37)</a>, <a
    href="/blog/tag/academic/">academic (28)</a>, <a
    href="/blog/tag/asynchronous/">asynchronous (27)</a>, <a
    href="/blog/tag/programming-languages/">programming languages (23)</a>, <a
    href="/blog/tag/parallel/">parallel (23)</a>, <a
    href="/blog/tag/functional-programming/">functional programming (20)</a>, <a
    href="/blog/tag/universe/">universe (20)</a>, <a
    href="/blog/tag/meta-programming/">meta-programming (18)</a>, <a
    href="/blog/tag/philosophy/">philosophy (16)</a>, <a
    href="/blog/tag/links/">links (15)</a>, <a
    href="/blog/tag/presentations/">presentations (14)</a>, <a
    href="/blog/tag/thegamma/">thegamma (12)</a>, <a
    href="/blog/tag/data-science/">data science (12)</a>, <a
    href="/blog/tag/writing/">writing (12)</a>, <a
    href="/blog/tag/joinads/">joinads (12)</a>, <a
    href="/blog/tag/web/">web (11)</a>, <a
    href="/blog/tag/talks/">talks (9)</a>, <a
    href="/blog/tag/data-journalism/">data journalism (9)</a>, <a
    href="/blog/tag/math-and-numerics/">math and numerics (9)</a>, <a
    href="/blog/tag/random-thoughts/">random thoughts (9)</a>, <a
    href="/blog/tag/phalanger/">phalanger (8)</a>, <a
    href="/blog/tag/haskell/">haskell (7)</a>, <a
    href="/blog/tag/mono/">mono (7)</a>, <a
    href="/blog/tag/webcast/">webcast (7)</a>, <a
    href="/blog/tag/design/">design (6)</a>, <a
    href="/blog/tag/architecture/">architecture (5)</a>, <a
    href="/blog/tag/fslab/">fslab (5)</a>, <a
    href="/blog/tag/open-source/">open source (5)</a>, <a
    href="/blog/tag/type-providers/">type providers (4)</a>, <a
    href="/blog/tag/visualization/">visualization (4)</a>, <a
    href="/blog/tag/fun/">fun (4)</a>, <a
    href="/blog/tag/accelerator/">accelerator (4)</a>, <a
    href="/blog/tag/linq/">linq (3)</a>, <a
    href="/blog/tag/fsharp-data/">f# data (3)</a>, <a
    href="/blog/tag/dotnet/">.net (3)</a>, <a
    href="/blog/tag/training/">training (2)</a>, <a
    href="/blog/tag/coeffects/">coeffects (2)</a>, <a
    href="/blog/tag/deedle/">deedle (2)</a>, <a
    href="/blog/tag/monads/">monads (2)</a>, <a
    href="/blog/tag/art/">art (2)</a>, <a
    href="/blog/tag/fractals/">fractals (2)</a>, <a
    href="/blog/tag/funscript/">funscript (2)</a>, <a
    href="/blog/tag/new-york/">new york (2)</a>, <a
    href="/blog/tag/manning/">manning (2)</a>, <a
    href="/blog/tag/books/">books (2)</a>
</article>


  <footer>
  <div class="footer-body">
    <div class="fl70"><div class="fmr">
      <h4><a href="http://tomasp.net/rss.xml"><i class="fa fa-rss" style="margin-right:5px;"></i></a> Blog archives</h4>
      <p>
      
      <a href="/blog/archive/february_2025/">February 2025 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2023/">December 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2023/">February 2023 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2022/">September 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2022/">April 2022 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2021/">October 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2021/">April 2021 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2020/">October 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2020/">July 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2020/">April 2020 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2019/">December 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2019/">February 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2018/">November 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2018/">October 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2018/">May 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2017/">September 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2017/">June 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2017/">April 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2017/">March 2017 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2017/">January 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2016/">October 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2016/">September 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/august_2016/">August 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2016/">July 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2016/">May 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2016/">April 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2015/">December 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2015/">November 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2015/">September 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2015/">July 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2015/">June 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2015/">May 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2015/">April 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2015/">March 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2015/">February 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2015/">January 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2014/">December 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2014/">May 2014 (3)</a>,&nbsp;
      
      <a href="/blog/archive/april_2014/">April 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2014/">March 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2014/">January 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2013/">December 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2013/">November 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2013/">October 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2013/">September 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2013/">August 2013 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2013/">May 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2013/">April 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2013/">March 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2013/">February 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2013/">January 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2012/">December 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/october_2012/">October 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2012/">August 2012 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2012/">June 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2012/">April 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2012/">March 2012 (4)</a>,&nbsp;
      
      <a href="/blog/archive/february_2012/">February 2012 (5)</a>,&nbsp;
      
      <a href="/blog/archive/january_2012/">January 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2011/">November 2011 (5)</a>,&nbsp;
      
      <a href="/blog/archive/august_2011/">August 2011 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2011/">July 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/june_2011/">June 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2011/">May 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2011/">March 2011 (4)</a>,&nbsp;
      
      <a href="/blog/archive/december_2010/">December 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2010/">November 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2010/">October 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/september_2010/">September 2010 (4)</a>,&nbsp;
      
      <a href="/blog/archive/july_2010/">July 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2010/">June 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2010/">May 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2010/">February 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2010/">January 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/december_2009/">December 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2009/">July 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2009/">June 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2009/">May 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2009/">April 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2009/">March 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2009/">February 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2008/">December 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2008/">November 2008 (5)</a>,&nbsp;
      
      <a href="/blog/archive/october_2008/">October 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2008/">September 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2008/">June 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2008/">March 2008 (3)</a>,&nbsp;
      
      <a href="/blog/archive/february_2008/">February 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2007/">December 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2007/">November 2007 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2007/">October 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2007/">September 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2007/">August 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2007/">July 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2007/">April 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2007/">March 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2007/">February 2007 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2007/">January 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2006/">November 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2006/">October 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/august_2006/">August 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/july_2006/">July 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2006/">June 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2006/">May 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2006/">April 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2005/">December 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2005/">July 2005 (4)</a>,&nbsp;
      
      <a href="/blog/archive/june_2005/">June 2005 (5)</a>,&nbsp;
      
      <a href="/blog/archive/may_2005/">May 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2005/">April 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2005/">March 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2005/">January 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2004/">December 2004 (3)</a>,&nbsp;
      
      <a href="/blog/archive/november_2004/">November 2004 (2)</a>,&nbsp;
      
      </p>
    </div></div>
    <div class="fr30"><div class="fmr">
      <h4>License and about</h4>
      <p>All articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under the MIT License.
      </p>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>
        and <a href="http://dotliquidmarkup.org/">DotLiquid</a>.
        For more info, see the <a href="https://github.com/tpetricek/tomasp.net">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li><i class="fab fa-twitter"></i> Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li><i class="fab fa-github"></i> GitHub: <a href="https://github.com/tpetricek">@tpetricek</a></li>
        <li><i class="fa fa-envelope"></i> Email: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
      </ul>
      <p style="text-align:center;margin-top:15px;"><img src="https://tomasp.net/img/cc-sa.png" alt="CC License logo" /></p>
    </div></div>
  </div>
  </footer>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
